{"version":3,"file":"a11y-menu-button.umd.js","sources":["a11y-menu-button.umd.js"],"sourcesContent":["import { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@lrnwebcomponents/simple-tooltip/simple-tooltip.js\";\n/**\n * `a11y-menu-button`\n * an accessible expand collapse\n * \n### Styling\n\n`<a11y-menu-button>` provides the following custom properties\nfor styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--a11y-menu-button-margin` | margin around a11y-menu-button | 15px 0\n`--a11y-menu-button-border` | border around a11y-menu-button | 1px solid\n`--a11y-menu-button-horizontal-padding` | horizontal padding inside a11y-menu-button | 16px\n`--a11y-menu-button-horizontal-padding-left` | left padding inside a11y-menu-button | `--a11y-menu-button-horizontal-padding`\n`--a11y-menu-button-horizontal-padding-right` | right padding inside a11y-menu-button | `--a11y-menu-button-horizontal-padding`\n`--a11y-menu-button-vertical-padding` | vertical padding inside a11y-menu-button | 16px\n`--a11y-menu-button-horizontal-padding-top` | top padding inside a11y-menu-button | `--a11y-menu-button-vertical-padding`\n`--a11y-menu-button-horizontal-padding-bottom` | bottom padding inside a11y-menu-button | --a11y-menu-button-vertical-padding\n`--a11y-menu-button-border-between` | border between a11y-menu-button heading and content | --a11y-menu-button-border\n`--a11y-menu-button-heading-font-weight` | font-weight for a11y-menu-button heading | bold\n`--a11y-menu-button-heading-color` | text color for a11y-menu-button heading | unset\n`--a11y-menu-button-heading-background-color` | background-color for a11y-menu-button heading | unset\n`--a11y-menu-button-overflow-y` | override default overflow behavior | hidden\n`--a11y-menu-button-max-height` | override maximum height of collapse section | 200000000000vh, so that aanimation effect works\n *\n * @element a11y-menu-button\n * @demo ./demo/index.html demo\n * @demo ./demo/group.html collapse groups\n * @element a11y-menu-button\n */\nclass A11yMenuButton extends LitElement {\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: block;\n          margin: var(--a11y-menu-button-margin, 15px 0);\n          border: var(--a11y-menu-button-border, 1px solid);\n          transition: all 0.5s cubic-bezier(0.075, 0.82, 0.165, 1);\n        }\n        :host(:not(:first-of-type)) {\n          border-top: var(\n            --a11y-menu-button-border-between,\n            var(--a11y-menu-button-border, 1px solid)\n          );\n        }\n        :host([disabled]) {\n          opacity: 0.5;\n        }\n        *[aria-controls=\"content\"][disabled] {\n          cursor: not-allowed;\n        }\n        #heading {\n          display: flex;\n          justify-content: stretch;\n          align-items: center;\n          padding: 0\n            var(\n              --a11y-menu-button-padding-right,\n              var(--a11y-menu-button-horizontal-padding, 16px)\n            )\n            0\n            var(\n              --a11y-menu-button-padding-left,\n              var(--a11y-menu-button-horizontal-padding, 16px)\n            );\n          font-weight: var(--a11y-menu-button-heading-font-weight, bold);\n          margin: var(--a11y-menu-button-margin, unset);\n          color: var(--a11y-menu-button-heading-color, unset);\n          background-color: var(\n            --a11y-menu-button-heading-background-color,\n            unset\n          );\n        }\n        #text {\n          flex-grow: 1;\n          overflow: hidden;\n        }\n        #expand {\n          transform: rotate(0deg);\n          transition: transform 0.75s ease;\n          padding: (--a11y-menu-button-icon-padding, unset);\n        }\n        #expand.rotated {\n          transform: rotate(-90deg);\n          transition: transform 0.75s ease;\n        }\n        #content {\n          padding: 0\n            var(\n              --a11y-menu-button-padding-right,\n              var(--a11y-menu-button-horizontal-padding, 16px)\n            )\n            0\n            var(\n              --a11y-menu-button-padding-left,\n              var(--a11y-menu-button-horizontal-padding, 16px)\n            );\n          border-top: 0px solid;\n          max-height: 0;\n          transition: all 0.75s ease;\n          overflow-y: hidden;\n        }\n        :host #content-inner {\n          max-height: 0;\n          overflow-y: var(--a11y-menu-button-overflow-y, hidden);\n        }\n        :host([expanded]) #content {\n          padding: var(\n              --a11y-menu-button-padding-top,\n              var(--a11y-menu-button-vertical-padding, 16px)\n            )\n            var(\n              --a11y-menu-button-padding-right,\n              var(--a11y-menu-button-horizontal-padding, 16px)\n            )\n            var(\n              --a11y-menu-button-padding-bottom,\n              var(--a11y-menu-button-vertical-padding, 16px)\n            )\n            var(\n              --a11y-menu-button-padding-left,\n              var(--a11y-menu-button-horizontal-padding, 16px)\n            );\n          border-top: var(--a11y-menu-button-border, 1px solid);\n          max-height: 200000000000vh;\n        }\n        :host([expanded]) #content-inner {\n          max-height: var(--a11y-menu-button-max-height, 200000000000vh);\n          transition: max-height 0.75s ease;\n        }\n      `\n    ];\n  }\n  render() {\n    return html`\n      ${this.accordion ? this._makeAccordionButton() : this._makeIconButton()}\n      <div\n        id=\"content\"\n        aria-hidden=\"${this.expanded ? \"false\" : \"true\"}\"\n        aria-labelledby=\"heading\"\n        aria-live=\"polite\"\n      >\n        <div id=\"content-inner\">\n          <slot name=\"content\"></slot>\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  static get tag() {\n    return \"a11y-menu-button\";\n  }\n\n  static get properties() {\n    return {\n      /**\n       * accordion-style: whole header acts as button? default is just icon.\n       */\n      accordion: {\n        type: Boolean,\n        reflect: true\n      },\n      /**\n       * is disabled?\n       */\n      disabled: {\n        type: Boolean,\n        reflect: true\n      },\n      /**\n       * icon when expanded\n       */\n      expanded: {\n        type: Boolean,\n        reflect: true\n      },\n      /**\n       * icon for the button\n       */\n      icon: {\n        type: String\n      },\n      /**\n       * icon when expanded\n       */\n      iconExpanded: {\n        type: String,\n        attribute: \"icon-expanded\"\n      },\n      /**\n       * label for the button\n       */\n      label: {\n        type: String\n      },\n      /**\n       * optional label for the button when expanded\n       */\n      labelExpanded: {\n        type: String,\n        attribute: \"label-expanded\"\n      },\n      /**\n       * tooltip for the button\n       */\n      tooltip: {\n        type: String\n      },\n      /**\n       * optional tooltip for the button when expanded\n       */\n      tooltipExpanded: {\n        type: String,\n        attribute: \"tooltip-expanded\"\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.accordion = false;\n    this.disabled = false;\n    this.expanded = false;\n    this.icon = \"icons:expand-more\";\n    this.label = \"expand / collapse\";\n    this.tooltip = \"toggle expand / collapse\";\n  }\n  static get haxProperties() {\n    return {\n      canScale: false,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Single Expand Collapse\",\n        description: \"A single instance of an expand collapse.\",\n        icon: \"view-day\",\n        color: \"grey\",\n        groups: [\"Text\"]\n      },\n      settings: {\n        quick: [\n          {\n            property: \"accordion\",\n            title: \"Heading Button\",\n            description: \"Make entire heading clickble.\",\n            inputMethod: \"boolean\"\n          },\n          {\n            property: \"expanded\",\n            title: \"Expanded\",\n            description: \"Expand by default\",\n            inputMethod: \"boolean\"\n          }\n        ],\n        configure: [\n          {\n            slot: \"heading\",\n            title: \"Heading\",\n            description: \"The heading for the collapse.\",\n            inputMethod: \"textfield\"\n          },\n          {\n            slot: \"content\",\n            title: \"Content\",\n            description: \"The content for the collapse.\",\n            inputMethod: \"code-editor\"\n          },\n          {\n            property: \"accordion\",\n            title: \"Heading Button\",\n            description: \"Make entire heading clickble.\",\n            inputMethod: \"boolean\"\n          },\n          {\n            property: \"expanded\",\n            title: \"Expanded\",\n            description: \"Expand by default\",\n            inputMethod: \"boolean\"\n          },\n          {\n            property: \"icon\",\n            title: \"Icon\",\n            description: \"The icon for the toggle expand/collapse button.\",\n            inputMethod: \"iconpicker\",\n            options: []\n          },\n          {\n            property: \"iconExpanded\",\n            title: \"Icon (when expanded)\",\n            description:\n              \"Optional: The icon for the toggle expand/collapse button when expanded\",\n            inputMethod: \"iconpicker\",\n            options: []\n          },\n          {\n            property: \"label\",\n            title: \"Label\",\n            description: \"The label of the toggle expand/collapse button\",\n            inputMethod: \"textfield\"\n          },\n          {\n            property: \"labelExpanded\",\n            title: \"Label (when expanded)\",\n            description:\n              \"The label of the toggle expand/collapse button when expanded.\",\n            inputMethod: \"textfield\"\n          },\n          {\n            property: \"tooltip\",\n            title: \"Tooltip\",\n            description: \"The tooltip for the toggle expand/collapse button\",\n            inputMethod: \"textfield\"\n          },\n          {\n            property: \"tooltipExpanded\",\n            title: \"Tooltip (when expanded)\",\n            description:\n              \"The tooltip for the toggle expand/collapse button when expanded\",\n            inputMethod: \"textfield\"\n          }\n        ],\n        advanced: []\n      }\n    };\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    setTimeout(() => {\n      /**\n       * Fires when constructed, so that parent radio group can listen for it.\n       *\n       * @event a11y-menu-button-attached\n       */\n      this.dispatchEvent(\n        new CustomEvent(\"a11y-menu-button-attached\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    }, 0);\n  }\n\n  /**\n   * Let the group know that this is gone.\n   */\n  disconnectedCallback() {\n    /**\n     * Fires when detatched, so that parent radio group will no longer listen for it.\n     *\n     * @event a11y-menu-button-detached\n     */\n    this.dispatchEvent(\n      new CustomEvent(\"a11y-menu-button-detached\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: this\n      })\n    );\n    super.disconnectedCallback();\n  }\n  /**\n   * Collapses the content\n   */\n  collapse() {\n    this.toggle(false);\n  }\n\n  /**\n   * Expands the content\n   */\n  expand() {\n    this.toggle(true);\n  }\n\n  /**\n   * Toggles based on mode\n   * @param {boolean} open whether to toggle open\n   */\n  toggle(open = !this.expanded) {\n    this.expanded = open;\n  }\n\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      if (propName === \"expanded\") this._fireToggleEvents();\n    });\n  }\n\n  /**\n   * Fires toggling events\n   */\n  _fireToggleEvents() {\n    /**\n     * Fires when toggled.\n     *\n     * @event toggle\n     */\n    this.dispatchEvent(\n      new CustomEvent(\"toggle\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: this\n      })\n    );\n    /**\n     * Deprecated. Fires when toggled.\n     *\n     * @event a11y-menu-button-toggle\n     */\n    this.dispatchEvent(\n      new CustomEvent(\"a11y-menu-button-toggle\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: this\n      })\n    );\n    if (this.expanded) {\n      /**\n       * Fires when expanded.\n       *\n       * @event expand\n       */\n      this.dispatchEvent(\n        new CustomEvent(\"expand\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    } else {\n      /**\n       * Fires when collapsed.\n       *\n       * @event collapse\n       */\n      this.dispatchEvent(\n        new CustomEvent(\"collapse\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    }\n  }\n  /**\n   * determines the property based on expanded state\n   * @param {string} defaultProp default property\n   * @param {string} expandedProp property when expanded\n   * @param {boolean} expanded whether a11y-menu-button is expanded\n   * @returns {string} property based on expanded state\n   */\n  _getExpanded(defaultProp, expandedProp, expanded) {\n    return expanded && expandedProp ? expandedProp : defaultProp;\n  }\n  /**\n   * renders collapse item where only entire heading is clickable button\n   * @returns {object} html template for a heading as a clickable button\n   */\n  _makeAccordionButton() {\n    return html`\n      <div\n        id=\"heading\"\n        aria-controls=\"content\"\n        aria-expanded=\"${this.expanded ? \"true\" : \"false\"}\"\n        role=\"button\"\n        @click=\"${this._onClick}\"\n        ?disabled=\"${this.disabled}\"\n        .label=\"${this._getExpanded(\n          this.label,\n          this.labelExpanded,\n          this.expanded\n        )}\"\n      >\n        <div id=\"text\"><slot name=\"heading\"></slot></div>\n        <iron-icon\n          id=\"expand\"\n          class=\"${!this.expanded && !this.iconExpanded ? \"rotated\" : \"\"}\"\n          .icon=\"${this._getExpanded(\n            this.icon,\n            this.iconExpanded,\n            this.expanded\n          )}\"\n          aria-hidden=\"true\"\n        >\n        </iron-icon>\n      </div>\n      <simple-tooltip for=\"heading\"\n        >${this._getExpanded(\n          this.tooltip,\n          this.tooltipExpanded,\n          this.expanded\n        )}</simple-tooltip\n      >\n    `;\n  }\n  /**\n   * renders collapse item where only icon is a clickable button\n   * @returns {object} html template for a heading with an icon button\n   */\n  _makeIconButton() {\n    return html`\n      <div id=\"heading\">\n        <div id=\"text\"><slot name=\"heading\"></slot></div>\n        <paper-icon-button\n          id=\"expand\"\n          class=\"${!this.expanded && !this.iconExpanded ? \"rotated\" : \"\"}\"\n          @click=\"${this._onClick}\"\n          ?disabled=\"${this.disabled}\"\n          .label=\"${this._getExpanded(\n            this.label,\n            this.labelExpanded,\n            this.expanded\n          )}\"\n          .icon=\"${this._getExpanded(\n            this.icon,\n            this.iconExpanded,\n            this.expanded\n          )}\"\n          aria-controls=\"content\"\n          aria-expanded=\"${this.expanded ? \"true\" : \"false\"}\"\n        >\n        </paper-icon-button>\n        <simple-tooltip for=\"expand\"\n          >${this._getExpanded(\n            this.tooltip,\n            this.tooltipExpanded,\n            this.expanded\n          )}</simple-tooltip\n        >\n      </div>\n    `;\n  }\n\n  /**\n   * Handle click\n   */\n  _onClick() {\n    if (!this.disabled) {\n      this.toggle();\n      /**\n       * Fires when clicked.\n       *\n       * @event a11y-menu-button-click\n       */\n      this.dispatchEvent(\n        new CustomEvent(\"a11y-menu-button-click\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    }\n  }\n}\nwindow.customElements.define(A11yMenuButton.tag, A11yMenuButton);\nexport { A11yMenuButton };\n"],"names":["A11yMenuButton","accordion","disabled","expanded","icon","label","tooltip","LitElement","html","this","_makeAccordionButton","_makeIconButton","css","type","Boolean","reflect","String","iconExpanded","attribute","labelExpanded","tooltipExpanded","setTimeout","_this2","dispatchEvent","CustomEvent","bubbles","cancelable","composed","detail","toggle","open","changedProperties","forEach","oldValue","propName","_this3","_fireToggleEvents","defaultProp","expandedProp","_onClick","_getExpanded","canScale","canPosition","canEditSource","gizmo","title","description","color","groups","settings","quick","property","inputMethod","configure","slot","options","advanced","window","customElements","define","tag"],"mappings":"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"}