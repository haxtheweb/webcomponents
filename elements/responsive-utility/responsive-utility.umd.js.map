{"version":3,"file":"responsive-utility.umd.js","sources":["responsive-utility.umd.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport { IronResizableBehavior } from \"@polymer/iron-resizable-behavior/iron-resizable-behavior.js\";\n\nwindow.ResponsiveUtility = {};\nwindow.ResponsiveUtility.instance = null;\nclass ResponsiveUtility extends IronResizableBehavior(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline;\n      }\n    </style>\n    <slot></slot>`;\n  }\n  static get tag() {\n    return \"responsive-utility\";\n  }\n\n  static get properties() {\n    let props = {\n      /**\n       * Stores\n       */\n      details: {\n        type: Array,\n        value: []\n      }\n    };\n    if (super.properties) {\n      props = Object.assign(props, super.properties);\n    }\n    return props;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    afterNextRender(this, function () {\n      this.addEventListener(\"iron-resize\", this._onIronResize.bind(this));\n    });\n  }\n  disconnectedCallback() {\n    let root = this;\n    this.removeEventListener(\"iron-resize\", this._onIronResize.bind(this));\n    window.removeEventListener(\"responsive-element\", (e) => {\n      let detail = {\n        element: e.detail.element,\n        attribute:\n          e.detail.attribute !== undefined && e.detail.attribute !== null\n            ? e.detail.attribute\n            : \"responsive-size\",\n        relativeToParent:\n          e.detail.relativeToParent !== undefined &&\n            e.detail.relativeToParent !== null\n            ? e.detail.relativeToParent\n            : true,\n        sm:\n          e.detail.sm !== undefined && e.detail.sm !== null ? e.detail.sm : 900,\n        md:\n          e.detail.md !== undefined && e.detail.md !== null\n            ? e.detail.md\n            : 1200,\n        lg:\n          e.detail.lg !== undefined && e.detail.lg !== null\n            ? e.detail.lg\n            : 1500,\n        xl:\n          e.detail.xl !== undefined && e.detail.xl !== null ? e.detail.lg : 1800\n      };\n      if (\"ResizeObserver\" in window && detail.relativeToParent === true) {\n        let resize = new ResizeObserver(function () {\n          window.ResponsiveUtility.setSize(detail);\n        }),\n          observable =\n            e.detail.parentNode !== undefined && e.detail.parentNode !== null\n              ? e.detail.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n                ? e.detail.element.parentNode.host\n                : e.detail.element.parentNode\n              : e.detail.element;\n        resize.observe(observable);\n      }\n      root.push(\"details\", detail);\n      window.ResponsiveUtility.setSize(detail);\n    });\n    /* handle element deregistration */\n    window.removeEventListener(\"delete-responsive-element\",  (e) => {\n      for (let i = 0; i < this.details.length; i++) {\n        if (e.detail === detail[i]) root.splice(\"details\", i, 1);\n      }\n    });\n    super.disconnectedCallback();\n  }\n  /**\n   * An array of objects. Each object is contains data about an element\n   * that will be updated with responsive values.\n   *\n   * To add an element to this array, fire a 'responsive-element' event\n   * with the following data:\n   *\n   * {\n   *   \"element\": (the element itself),\n   *   \"attribute\": (the attribute that will be set with the size),\n   *   \"relativeToParent\": (true for @element query instead of @media query),\n   *   \"sm\": (optional custom sm breakpoint, default is 600),\n   *   \"md\": (optional custom md breakpoint, default is 900),\n   *   \"lg\": (optional custom lg breakpoint, default is 1200),\n   *   \"xl\": (optional custom xl breakpoint, default is 1500),\n   * }\n   *\n   */\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  constructor() {\n    super();\n    let root = this;\n    if (window.ResponsiveUtility.instance == null) {\n      window.ResponsiveUtility.instance = root;\n    }\n    /* handle element registration */\n    window.addEventListener(\"responsive-element\", (e) => {\n      let detail = {\n        element: e.detail.element,\n        attribute:\n          e.detail.attribute !== undefined && e.detail.attribute !== null\n            ? e.detail.attribute\n            : \"responsive-size\",\n        relativeToParent:\n          e.detail.relativeToParent !== undefined &&\n          e.detail.relativeToParent !== null\n            ? e.detail.relativeToParent\n            : true,\n        sm:\n          e.detail.sm !== undefined && e.detail.sm !== null ? e.detail.sm : 900,\n        md:\n          e.detail.md !== undefined && e.detail.md !== null\n            ? e.detail.md\n            : 1200,\n        lg:\n          e.detail.lg !== undefined && e.detail.lg !== null\n            ? e.detail.lg\n            : 1500,\n        xl:\n          e.detail.xl !== undefined && e.detail.xl !== null ? e.detail.lg : 1800\n      };\n      if (\"ResizeObserver\" in window && detail.relativeToParent === true) {\n        let resize = new ResizeObserver(function() {\n            window.ResponsiveUtility.setSize(detail);\n          }),\n          observable =\n            e.detail.parentNode !== undefined && e.detail.parentNode !== null\n              ? e.detail.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n                ? e.detail.element.parentNode.host\n                : e.detail.element.parentNode\n              : e.detail.element;\n        resize.observe(observable);\n      }\n      root.push(\"details\", detail);\n      window.ResponsiveUtility.setSize(detail);\n    });\n    /* handle element deregistration */\n    window.addEventListener(\"delete-responsive-element\", (e) => {\n      for (let i = 0; i < this.details.length; i++) {\n        if (e.detail === detail[i]) root.splice(\"details\", i, 1);\n      }\n    });\n  }\n\n  /**\n   * On resize, sets sizes of any detail element that has changed.\n   */\n  _onIronResize() {\n    for (let i = 0; i < this.details.length; i++) {\n      window.ResponsiveUtility.setSize(this.details[i]);\n    }\n  }\n}\nwindow.customElements.define(ResponsiveUtility.tag, ResponsiveUtility);\nexport { ResponsiveUtility };\n\n/**\n * Checks to see if there is an instance available, and if not appends one\n */\nwindow.ResponsiveUtility.requestAvailability = function() {\n  if (window.ResponsiveUtility.instance == null) {\n    window.ResponsiveUtility.instance = document.createElement(\n      \"responsive-utility\"\n    );\n  }\n  document.body.appendChild(window.ResponsiveUtility.instance);\n};\n/**\n * Sets responsive size of detail.\n */\nwindow.ResponsiveUtility.setSize = function(detail) {\n  let size,\n    width = window.ResponsiveUtility._getWidth(detail);\n  if (width < detail.sm) {\n    size = \"xs\";\n  } else if (width < detail.md) {\n    size = \"sm\";\n  } else if (width < detail.lg) {\n    size = \"md\";\n  } else if (width < detail.xl) {\n    size = \"lg\";\n  } else {\n    size = \"xl\";\n  }\n  if (\n    detail.element.getAttribute(detail.attribute) === undefined ||\n    size !== detail.element.getAttribute(detail.attribute)\n  ) {\n    detail.element.setAttribute(detail.attribute, size);\n  }\n};\n/**\n * Returns width of detail.\n *\n * @param {object} the HTML element to check\n * @returns {number} the width of the element or its parent node\n */\nwindow.ResponsiveUtility._getWidth = function(detail) {\n  let el = detail.element;\n  if (detail.relativeToParent === true) {\n    if (\n      el.offsetWidth !== undefined &&\n      el.offsetWidth !== null &&\n      el.offsetWidth > 0\n    ) {\n      return el.offsetWidth;\n    } else if (el.parentNode !== null) {\n      return el.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n        ? el.parentNode.host.offsetWidth\n        : el.parentNode.offsetWidth;\n    }\n  }\n  return window.outerWidth;\n};"],"names":["window","ResponsiveUtility","instance","root","addEventListener","e","detail","element","attribute","undefined","relativeToParent","sm","md","lg","xl","resize","ResizeObserver","setSize","observable","parentNode","nodeType","Node","DOCUMENT_FRAGMENT_NODE","host","observe","push","i","_this","details","length","splice","IronResizableBehavior","PolymerElement","afterNextRender","this","_onIronResize","bind","removeEventListener","_this2","html","props","type","Array","value","Object","assign","customElements","define","tag","requestAvailability","document","createElement","body","appendChild","size","width","_getWidth","getAttribute","setAttribute","el","offsetWidth","outerWidth"],"mappings":"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"}