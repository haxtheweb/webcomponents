{"version":3,"file":"responsive-utility.umd.js","sources":["responsive-utility.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport { IronResizableBehavior } from \"@polymer/iron-resizable-behavior/iron-resizable-behavior.js\";\n\nwindow.ResponsiveUtility = {};\nwindow.ResponsiveUtility.instance = null;\nlet ResponsiveUtility = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline;\n      }\n    </style>\n    <slot></slot>\n`,\n\n  is: \"responsive-utility\",\n\n  behaviors: [IronResizableBehavior],\n\n  listeners: {\n    \"iron-resize\": \"_onIronResize\"\n  },\n\n  properties: {\n    /**\n     * Stores\n     */\n    targets: {\n      type: Array,\n      value: []\n    }\n  },\n\n  /**\n   * An array of objects. Each object is contains data about an element\n   * that will be updated with responsive values.\n   *\n   * To add an element to this array, fire a 'responsive-element' event\n   * with the following data:\n   *\n   * {\n   *   \"element\": (the element itself),\n   *   \"attribute\": (the attribute that will be set with the size),\n   *   \"relativeToParent\": (true for @element query instead of @media query),\n   *   \"sm\": (optional custom sm breakpoint, default is 600),\n   *   \"md\": (optional custom md breakpoint, default is 900),\n   *   \"lg\": (optional custom lg breakpoint, default is 1200),\n   *   \"xl\": (optional custom xl breakpoint, default is 1500),\n   * }\n   *\n   */\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  created: function() {\n    let root = this;\n    if (window.ResponsiveUtility.instance == null) {\n      window.ResponsiveUtility.instance = root;\n    }\n    /* handle element registration */\n    document.body.addEventListener(\"responsive-element\", function(e) {\n      let relative =\n        e.detail.relativeToParent !== undefined &&\n        e.detail.relativeToParent !== null\n          ? e.detail.relativeToParent\n          : true;\n      if (\"ResizeObserver\" in window && relative.relativeToParent === true) {\n        let parent = e.detail.element.parentNode,\n          resize = new ResizeObserver(function() {\n            window.ResponsiveUtility.setSize(e.detail);\n          });\n        if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n          parent = parent.host;\n        }\n        resize.observe(parent);\n      }\n      root.push(\"targets\", e.detail);\n      window.ResponsiveUtility.setSize(e.detail);\n    });\n    /* handle element deregistration */\n    document.body.addEventListener(\"delete-responsive-element\", function(e) {\n      for (let i = 0; i < this.targets.length; i++) {\n        if (e.detail === target[i]) root.splice(\"targets\", i, 1);\n      }\n    });\n  },\n\n  /**\n   * On resize, sets sizes of any target element that has changed.\n   */\n  _onIronResize: function() {\n    for (let i = 0; i < this.targets.length; i++) {\n      window.ResponsiveUtility.setSize(this.targets[i]);\n    }\n  }\n});\n\n/**\n * Checks to see if there is an instance available, and if not appends one\n */\nwindow.ResponsiveUtility.requestAvailability = function() {\n  if (window.ResponsiveUtility.instance == null) {\n    window.ResponsiveUtility.instance = document.createElement(\n      \"responsive-utility\"\n    );\n  }\n  document.body.appendChild(window.ResponsiveUtility.instance);\n};\n/**\n * Sets responsive size of target.\n */\nwindow.ResponsiveUtility.setSize = function(target) {\n  let element = target.element;\n  let attribute =\n    target.attribute !== undefined && target.attribute !== null\n      ? target.attribute\n      : \"responsive-size\";\n  let size = window.ResponsiveUtility.getSize(target);\n  if (\n    element.getAttribute(attribute) === undefined ||\n    size !== element.getAttribute(attribute)\n  ) {\n    element.setAttribute(attribute, size);\n  }\n};\n/**\n * Returns responsive size of target.\n */\nwindow.ResponsiveUtility.getSize = function(target) {\n  let relative =\n    target.relativeToParent !== undefined && target.relativeToParent !== null\n      ? target.relativeToParent\n      : true;\n  let getWidth = function() {\n      if (target.element.parentNode !== null && relative === true) {\n        if (\n          target.element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n        ) {\n          return target.element.parentNode.host.offsetWidth;\n        }\n        return target.element.parentNode.offsetWidth;\n      }\n      return window.outerWidth;\n    },\n    testBreakpoint = function(width, breakpoint, def) {\n      let val =\n        breakpoint !== undefined && breakpoint !== null ? breakpoint : def;\n      return width < val;\n    },\n    size,\n    width = getWidth();\n  if (testBreakpoint(width, target.sm, 600)) {\n    size = \"xs\";\n  } else if (testBreakpoint(width, target.md, 900)) {\n    size = \"sm\";\n  } else if (testBreakpoint(width, target.lg, 1200)) {\n    size = \"md\";\n  } else if (testBreakpoint(width, target.xl, 1200)) {\n    size = \"lg\";\n  } else {\n    size = \"xl\";\n  }\n  return size;\n};\nexport { ResponsiveUtility };\n"],"names":["window","ResponsiveUtility","instance","Polymer","_template","html","is","behaviors","IronResizableBehavior","listeners","properties","targets","type","Array","value","created","root","this","document","body","addEventListener","e","relative","undefined","detail","relativeToParent","parent","element","parentNode","resize","ResizeObserver","setSize","nodeType","Node","DOCUMENT_FRAGMENT_NODE","host","observe","push","i","length","target","splice","_onIronResize","requestAvailability","createElement","appendChild","attribute","size","getSize","getAttribute","setAttribute","testBreakpoint","width","breakpoint","def","offsetWidth","outerWidth","sm","md","lg","xl"],"mappings":"6yBAIAA,OAAOC,kBAAoB,GAC3BD,OAAOC,kBAAkBC,SAAW,SAChCD,EAAoBE,UAAQ,CAC9BC,UAAWC,YASXC,GAAI,qBAEJC,UAAW,CAACC,yBAEZC,UAAW,eACM,iBAGjBC,WAAY,CAIVC,QAAS,CACPC,KAAMC,MACNC,MAAO,KAyBXC,QAAS,eACHC,EAAOC,KAC8B,MAArCjB,OAAOC,kBAAkBC,WAC3BF,OAAOC,kBAAkBC,SAAWc,GAGtCE,SAASC,KAAKC,iBAAiB,qBAAsB,SAASC,OACxDC,OAC4BC,IAA9BF,EAAEG,OAAOC,kBACqB,OAA9BJ,EAAEG,OAAOC,kBACLJ,EAAEG,OAAOC,oBAEX,mBAAoBzB,SAAwC,IAA9BsB,EAASG,iBAA2B,KAChEC,EAASL,EAAEG,OAAOG,QAAQC,WAC5BC,EAAS,IAAIC,eAAe,WAC1B9B,OAAOC,kBAAkB8B,QAAQV,EAAEG,UAEnCE,EAAOM,WAAaC,KAAKC,yBAC3BR,EAASA,EAAOS,MAElBN,EAAOO,QAAQV,GAEjBV,EAAKqB,KAAK,UAAWhB,EAAEG,QACvBxB,OAAOC,kBAAkB8B,QAAQV,EAAEG,UAGrCN,SAASC,KAAKC,iBAAiB,4BAA6B,SAASC,OAC9D,IAAIiB,EAAI,EAAGA,EAAIrB,KAAKN,QAAQ4B,OAAQD,IACnCjB,EAAEG,SAAWgB,OAAOF,IAAItB,EAAKyB,OAAO,UAAWH,EAAG,MAQ5DI,cAAe,eACR,IAAIJ,EAAI,EAAGA,EAAIrB,KAAKN,QAAQ4B,OAAQD,IACvCtC,OAAOC,kBAAkB8B,QAAQd,KAAKN,QAAQ2B,OAQpDtC,OAAOC,kBAAkB0C,oBAAsB,WACJ,MAArC3C,OAAOC,kBAAkBC,WAC3BF,OAAOC,kBAAkBC,SAAWgB,SAAS0B,cAC3C,uBAGJ1B,SAASC,KAAK0B,YAAY7C,OAAOC,kBAAkBC,WAKrDF,OAAOC,kBAAkB8B,QAAU,SAASS,OACtCb,EAAUa,EAAOb,QACjBmB,OACmBvB,IAArBiB,EAAOM,WAAgD,OAArBN,EAAOM,UACrCN,EAAOM,UACP,kBACFC,EAAO/C,OAAOC,kBAAkB+C,QAAQR,QAENjB,IAApCI,EAAQsB,aAAaH,IACrBC,IAASpB,EAAQsB,aAAaH,IAE9BnB,EAAQuB,aAAaJ,EAAWC,IAMpC/C,OAAOC,kBAAkB+C,QAAU,SAASR,OACtClB,OAC0BC,IAA5BiB,EAAOf,kBAA8D,OAA5Be,EAAOf,kBAC5Ce,EAAOf,iBAaX0B,EAAiB,SAASC,EAAOC,EAAYC,UAGpCF,GADLC,MAAAA,EAAkDA,EAAaC,IAInEF,EAhBoC,OAA9BZ,EAAOb,QAAQC,aAAoC,IAAbN,EAEtCkB,EAAOb,QAAQC,WAAWI,WAAaC,KAAKC,uBAErCM,EAAOb,QAAQC,WAAWO,KAAKoB,YAEjCf,EAAOb,QAAQC,WAAW2B,YAE5BvD,OAAOwD,kBASdL,EAAeC,EAAOZ,EAAOiB,GAAI,KAC5B,KACEN,EAAeC,EAAOZ,EAAOkB,GAAI,KACnC,KACEP,EAAeC,EAAOZ,EAAOmB,GAAI,MACnC,KACER,EAAeC,EAAOZ,EAAOoB,GAAI,MACnC,KAEA"}