{"version":3,"file":"lrndesign-timeline.umd.js","sources":["lrndesign-timeline.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { HAXWiring } from \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport { SimpleColors } from \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"@lrnwebcomponents/responsive-utility/responsive-utility.js\";\n\nexport { LrndesignTimeline };\n/**\n * `lrndesign-timeline`\n * `an element that displays events on a timeline`\n *\n * @microcopy - language worth noting:\n *  -\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass LrndesignTimeline extends SimpleColors {\n  \n  // render function\n  static get template() {\n    return html`\n<style>:host {\n  font-size: 14px;\n  font-weight: 100;\n  line-height: 160%;\n  display: block;\n  --lrndesign-timeline-color: var(--simple-colors-default-theme-grey-8, #444);\n  --lrndesign-timeline-color-print: #000;\n  --lrndesign-timeline-background: #f4f4f4;\n  --lrndesign-timeline-background-print: #fff;\n  --lrndesign-timeline-border: var(--simple-colors-default-theme-grey-5, #bbb);\n  --lrndesign-timeline-border-print: var(--simple-colors-fixed-theme-grey-5, #bbb);\n  --lrndesign-timeline-accent: #000;\n  --lrndesign-timeline-accent-background: #fff;\n  --lrndesign-timeline-accent-border: var(--simple-colors-default-theme-accent-8, #444);\n  --lrndesign-timeline-header: var(--simple-colors-default-theme-accent-1, #fff);\n  --lrndesign-timeline-header-accent: var(--simple-colors-default-theme-accent-8, #444);\n  --lrndesign-timeline-accent-print: var(--simple-colors-fixed-theme-accent-8, #444);\n}\n:host([dark]){\n  --lrndesign-timeline-background: #1b1b1b;\n}\n:host([hidden]) {\n  display: none;\n}\n:host #timeline {\n  display: block;\n  border-radius: 3px;\n  border: 1px solid var(--lrndesign-timeline-border-print);\n  border-left: 3px solid var(--lrndesign-timeline-accent-print);\n  background-color: var(--lrndesign-timeline-background-print);\n  color: var(--lrndesign-timeline-color-print);\n}\n:host #events {\n  padding: 0;\n  width: 100%;\n  min-height: 300px;\n}\n:host .heading {\n  margin: 0;\n  color: var(--lrndesign-timeline-accent-print);\n}\n:host .heading h2 {\n  font-size: 24px;\n  font-weight: 300;\n}\n:host .heading h2,\n:host .details,\n:host .media {\n  padding: 0 40px;\n}\n:host .details {\n  margin: 15px 0; \n}\n:host .media { \n  opacity: 1;\n  transition: opacity 0.5s;\n}\n:host .media, \n:host .media * { \n  margin: 0 auto;\n  max-width: 100%;\n  max-height: 260px;\n}\n@media screen {\n  :host #timeline {\n    color: var(--lrndesign-timeline-color);\n    background-color: var(--lrndesign-accent-background);\n    border: 1px solid var(--lrndesign-timeline-border);\n    border-left: 3px solid var(--lrndesign-timeline-accent-border);\n  }\n  :host([dark]) #timeline {\n    background-color: var(--lrndesign-timeline-background);\n  }\n  :host h2 {\n    color:  var(--lrndesign-timeline-header-accent);\n  }\n  :host(:not([timeline-size=\"xs\"])) #timeline {\n    background-color: var(--lrndesign-timeline-background);\n  }\n  :host(:not([timeline-size=\"xs\"])) h2 {\n    color: var(--lrndesign-timeline-header-accent);\n  }\n  :host(:not([timeline-size=\"xs\"])) #events {\n    height: 300px;\n    position: relative;\n    overflow-y: scroll;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event {\n    position: static;\n    top: 0;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event-overview {\n    padding: 0;\n    position: sticky;\n    top: 0;\n  }\n  :host(:not([timeline-size=\"xs\"])) .heading {\n    position: absolute;\n    top: 0;\n    padding: 10px 0;\n    overflow: hidden;\n    background-color: transparent;\n    width: calc(55% + 30px);\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[has-media][selected] .heading {\n    z-index: 2;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[has-media] .heading:after {\n    content: ' ';\n    z-index: 200;\n    position: absolute;\n    top: 42px;\n    right: 30px;\n    width: 0; \n    padding: 0; \n    border-top: 0px solid transparent;\n    border-bottom: 0px solid transparent;\n    border-left: 0px solid transparent;\n    transition: all 0.3s;\n    transition-delay: 0.2s;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[has-media][selected] .heading:after {\n    top: 7px;\n    right: 0px;\n    border-top: 35px solid transparent;\n    border-bottom: 35px solid transparent; \n    border-left: 35px solid var(--lrndesign-timeline-header-accent);\n  }\n  :host(:not([timeline-size=\"xs\"])) .heading h2 {\n    margin: 7px 48px 0 20px;\n    padding: 0 20px;\n    line-height: 50px;\n    height: 50px;\n    background-color: var(--lrndesign-timeline-header-accent);\n    color:  var(--lrndesign-timeline-header);\n    opacity: 0.6;\n    transition: opacity 0.3s;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[selected] .heading h2 {\n    opacity: 1;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[has-media] .heading h2:after {\n    content: '';\n    position: absolute;\n    left: calc(100% - 48px);\n    top: 17px;\n    height: 50px;\n    width: 0px;\n    transition: all 0.3s;\n    background-color: var(--lrndesign-timeline-background);\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[has-media][selected] .heading h2:after {\n    width: 13px;\n    background-color: var(--lrndesign-timeline-header-accent);\n  }\n  :host(:not([timeline-size=\"xs\"])) .media-outer {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    right: 0;\n    width: 45%;\n    height: 300px;\n  }\n  :host(:not([timeline-size=\"xs\"])) .media {\n    display: flex;\n    padding: 20px 20px 20px 50px;\n    opacity: 0;\n    transition: opacity 0.3s delay 0.3s;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[selected] .media {\n    opacity: 1;\n    transition-delay: 0s;\n  }\n  :host(:not([timeline-size=\"xs\"])) .details {\n    padding: 67px 20px 20px;\n    margin: 0 20px;\n    width: calc(55% - 80px);\n    color: var(--lrndesign-timeline-color);\n    background-color: var(--lrndesign-timeline-background);\n    border: 1px solid var(--lrndesign-timeline-background);\n    border-radius: 3px;\n    transition: all 0.5s;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event:last-of-type .details {\n    min-height: 180px;\n  }\n  :host(:not([timeline-size=\"xs\"])) .event[selected] .details {\n    color: var(--lrndesign-timeline-accent);\n    background-color:  var(--lrndesign-timeline-accent-background);\n    border: 1px solid var(--lrndesign-timeline-border);\n    box-shadow: 0 2px 2px var(--lrndesign-timeline-border);\n  }\n  :host(:not([timeline-size=\"xs\"])) .event:first-of-type[selected] .details {\n    border-top: 1px solid var(--lrndesign-timeline-background);\n  }\n  :host(:not([timeline-size=\"xs\"])) .event:last-of-type[selected] .details {\n    border-bottom: 1px solid var(--lrndesign-timeline-background);\n  }\n}</style>\n<style is=\"custom-style\" include=\"simple-colors\"></style>\n<article>\n  <h1 id=\"title\">[[title]]</h1>\n  <slot></slot>\n  <div id=\"timeline\">\n      <div id=\"events\" on-scroll=\"_onScroll\">\n        <template id=\"repeat\" is=\"dom-repeat\" items=\"[[__events]]\" as=\"event\" index-as=\"index\" restamp>\n          <section class=\"event\" has-media$=\"[[_isSet(event.imagesrc)]]\">\n            <div class=\"event-overview\">\n              <div class=\"heading\"><h2>[[event.heading]]</h2></div>\n              <div class=\"media-outer\">\n                <template is=\"dom-if\" if=\"[[_isSet(event.imagesrc)]]\" restamp>\n                  <div class=\"media\">\n                    <div><image alt$=\"[[event.imagealt]]\" src$=\"[[event.imagesrc]]\"/></div>\n                  </div>\n                </template>\n              </div>\n            </div>\n            <div class=\"details\">[[event.details]]</div>\n          </section>\n        </template>\n    </div>\n  </div>\n</article>`;\n  }\n\n  // haxProperty definition\n  static get haxProperties() {\n    return {\n  \"canScale\": false,\n  \"canPosition\": false,\n  \"canEditSource\": true,\n  \"gizmo\": {\n    \"title\": \"Timeline\",\n    \"description\": \"A timeline of events with images and text\",\n    \"icon\": \"icons:timeline\",\n    \"color\": \"indigo\",\n    \"groups\": [\"Content\", \"Instructional\", \"Media\", \"Image\"],\n    \"handles\": [\n      {\n        \"type\": \"image\",\n        \"source\": \"image\"\n      }\n    ],\n    \"meta\": {\n      \"author\": \"LRNWebComponents\"\n    }\n  },\n  \"settings\": {\n    \"quick\": [],\n    \"configure\": [\n      {\n        \"property\": \"title\",\n        \"title\": \"Timeline Title\",\n        \"description\": \"A title for the timeline.\",\n        \"inputMethod\": \"textfield\"\n      },\n      {\n        \"property\": \"accentColor\",\n        \"title\": \"Accent Color\",\n        \"description\": \"An optional accent color.\",\n        \"inputMethod\": \"colorpicker\",\n        \"icon\": \"editor:format-color-fill\"\n      },\n      {\n        \"property\": \"dark\",\n        \"title\": \"Dark Theme\",\n        \"description\": \"Enable Dark Theme\",\n        \"inputMethod\": \"boolean\",\n        \"icon\": \"icons:invert-colors\"\n      },\n      {\n        \"slot\": \"\",\n        \"title\": \"Timeline Description\",\n        \"description\": \"Optional text describing the timeline.\",\n        \"inputMethod\": \"textfield\"\n      },\n      {\n        \"property\": \"events\",\n        \"title\": \"Timeline Events\",\n        \"description\": \"The events in the timeline\",\n        \"inputMethod\": \"array\",\n        \"properties\": [\n          {\n            \"property\": \"heading\",\n            \"title\": \"Event Heading\",\n            \"description\": \"The heading for the event.\",\n            \"inputMethod\": \"textfield\",\n            \"icon\": \"editor:title\"\n          },\n          {\n            \"property\": \"details\",\n            \"title\": \"Event Details\",\n            \"description\": \"The body text with details for the event.\",\n            \"inputMethod\": \"textfield\",\n            \"icon\": \"editor:title\"\n          },\n          {\n            \"property\": \"imagesrc\",\n            \"title\": \"Event Image\",\n            \"description\": \"The path of the image.\",\n            \"inputMethod\": \"haxupload\",\n            \"icon\": \"editor:title\"\n          },\n          {\n            \"property\": \"imagealt\",\n            \"title\": \"Event Image Alt Text\",\n            \"description\": \"The alt text of the image (for accessibility).\",\n            \"inputMethod\": \"alt\",\n            \"icon\": \"editor:title\"\n          }\n        ]\n      }\n    ],\n    \"advanced\": []\n  }\n}\n;\n  }\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n  /**\n   * the title of the timeline\n   */\n  \"title\": {\n    \"type\": \"String\",\n    \"value\": null\n  },\n  /**\n   * the events of the timeline, in the desired order, as in:```\n[\n  {\n    \"heading\": \"1855 - Penn State Charter\",   //required, the main heading for the media, usually a date, time, or era\n    \"details\": \"\",                            //optional, text describing the event\n    \"image\": {                                //optional image for the event\n      \"src\": \"path/to/media.jpg\",             //the alt text of the image\n      \"alt\": \"path/to/media.mp3\",             //the url of the image\n    },\n    {...},\n    {...},\n  }\n]```\n   */\n  \"events\": {\n    \"type\": \"Array\",\n    \"value\": [],\n    \"notify\": true\n  },\n  /**\n   * the updated list of events\n   */\n  \"__events\": {\n    \"type\": \"Array\",\n    \"computed\": \"_updateEvents(events)\",\n    \"notify\": true\n  },\n  /**\n   * the timline size, calculated by responsive utility\n   */\n  \"timelineSize\": {\n    \"type\": \"String\",\n    \"value\": \"xs\",\n    \"reflectToAttribute\": true\n  }\n}\n;\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"lrndesign-timeline\";\n  }\n\n  /**\n   * gets simple-colors behaviors\n   */\n  static get behaviors() {\n    return [SimpleColors];\n  }\n  /**\n   * life cycle, element is afixed to the DOM\n   */\n  connectedCallback() {\n    let root = this;\n    super.connectedCallback();\n    this.HAXWiring = new HAXWiring();\n    this.HAXWiring.setup(\n      LrndesignTimeline.haxProperties,\n      LrndesignTimeline.tag,\n      this\n    );\n\n    window.ResponsiveUtility.requestAvailability();\n    window.dispatchEvent(\n      new CustomEvent(\"responsive-element\", {\n        detail: {\n          element: root,\n          attribute: \"timeline-size\",\n          relativeToParent: true,\n          sm: 600,\n          md: 900,\n          lg: 1200,\n          xl: 1600\n        }\n      })\n    );\n    this._checkScroll();\n  }\n\n  /**\n   * checks the scroll of each event\n   */\n  _checkScroll() {\n    let root = this,\n      events = root.shadowRoot.querySelectorAll(\".event\");\n    if (events.length < 1) root.$.repeat.render();\n    events = root.shadowRoot.querySelectorAll(\".event\");\n    events.forEach(event => {\n      let top = event.offsetTop,\n        target = events[0].offsetTop + 50 + event.parentNode.scrollTop,\n        bottom = event.offsetTop + event.offsetHeight;\n      if (target > top && target < bottom) {\n        event.setAttribute(\"selected\", true);\n      } else {\n        event.removeAttribute(\"selected\");\n      }\n    });\n  }\n\n  /**\n   * returns the media type for a given event, or false if there is no media\n   *\n   * @param {object} the event type to check\n   * @param {object} the media type to check\n   * @returns {string} the media type, or false if there is no media\n   */\n\n  _isMediaType(event, type) {\n    return this._isSet(event.media) && this._isSet(event.media.type)\n      ? event.media.type === type\n      : false;\n  }\n\n  /**\n   * returns true if an property is not null\n   *\n   * @param {object} the property to check\n   * @returns {boolean} property !== undefined && property !== null\n   */\n  _isSet(prop) {\n    return prop !== undefined && prop !== null;\n  }\n\n  /**\n   * gets updated event data\n   *\n   * @param {array} the raw events array\n   */\n  _updateEvents(events) {\n    events = typeof events === \"string\" ? JSON.parse(events) : events;\n    return events;\n  }\n\n  /**\n   * handles the scroll on the events side\n   */\n  _onScroll(e) {\n    this._checkScroll();\n  }\n}\nwindow.customElements.define(LrndesignTimeline.tag, LrndesignTimeline);\n"],"names":["LrndesignTimeline","SimpleColors","html","HAXWiring","setup","haxProperties","tag","this","window","ResponsiveUtility","requestAvailability","dispatchEvent","CustomEvent","detail","element","attribute","relativeToParent","sm","md","lg","xl","_checkScroll","events","shadowRoot","querySelectorAll","length","$","repeat","render","forEach","event","top","offsetTop","target","parentNode","scrollTop","bottom","offsetHeight","setAttribute","removeAttribute","type","_isSet","media","prop","JSON","parse","e","customElements","define"],"mappings":"izRAsBMA,gaAA0BC,6DAIrBC,wDAoOA,WACG,eACG,iBACE,QACR,OACE,uBACM,iDACP,uBACC,gBACC,CAAC,UAAW,gBAAiB,QAAS,iBACrC,CACT,MACU,eACE,eAGN,QACI,8BAGF,OACD,aACI,CACX,UACc,cACH,6BACM,wCACA,aAEjB,UACc,oBACH,2BACM,wCACA,mBACP,4BAEV,UACc,aACH,yBACM,gCACA,eACP,uBAEV,MACU,SACC,mCACM,qDACA,aAEjB,UACc,eACH,8BACM,yCACA,mBACD,CACZ,UACc,gBACH,4BACM,yCACA,iBACP,gBAEV,UACc,gBACH,4BACM,wDACA,iBACP,gBAEV,UACc,iBACH,0BACM,qCACA,iBACP,gBAEV,UACc,iBACH,mCACM,6DACA,WACP,4BAKJ,8CAOL,OAIA,MACC,eACC,aAiBD,MACA,cACC,WACC,YAKA,MACF,iBACI,gCACF,gBAKI,MACN,eACC,yBACa,sCAWf,6DAOA,CAACD,4HAQHE,UAAY,IAAIA,iBAChBA,UAAUC,MACbJ,EAAkBK,cAClBL,EAAkBM,IAClBC,MAGFC,OAAOC,kBAAkBC,sBACzBF,OAAOG,cACL,IAAIC,YAAY,qBAAsB,CACpCC,OAAQ,CACNC,QAbKP,KAcLQ,UAAW,gBACXC,kBAAkB,EAClBC,GAAI,IACJC,GAAI,IACJC,GAAI,KACJC,GAAI,cAILC,0DAQHC,EADSf,KACKgB,WAAWC,iBAAiB,UACxCF,EAAOG,OAAS,GAFTlB,KAEiBmB,EAAEC,OAAOC,UACrCN,EAHWf,KAGGgB,WAAWC,iBAAiB,WACnCK,QAAQ,SAAAC,OACTC,EAAMD,EAAME,UACdC,EAASX,EAAO,GAAGU,UAAY,GAAKF,EAAMI,WAAWC,UACrDC,EAASN,EAAME,UAAYF,EAAMO,aAC/BJ,EAASF,GAAOE,EAASG,EAC3BN,EAAMQ,aAAa,YAAY,GAE/BR,EAAMS,gBAAgB,mDAafT,EAAOU,YACXjC,KAAKkC,OAAOX,EAAMY,SAAUnC,KAAKkC,OAAOX,EAAMY,MAAMF,QACvDV,EAAMY,MAAMF,OAASA,iCAUpBG,UACEA,MAAAA,wCAQKrB,UACZA,EAA2B,iBAAXA,EAAsBsB,KAAKC,MAAMvB,GAAUA,oCAOnDwB,QACHzB,oDAGTb,OAAOuC,eAAeC,OAAOhD,EAAkBM,IAAKN"}