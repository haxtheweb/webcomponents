{"version":3,"file":"a11y-gif-player.umd.js","sources":["a11y-gif-player.umd.js"],"sourcesContent":["/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status.js\";\nimport { HAXWiring } from \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport { SchemaBehaviors } from \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport \"@polymer/iron-a11y-keys/iron-a11y-keys.js\";\n/**\n * `a11y-gif-player`\n * `Play gifs in an accessible way by having the user click to play their animation`\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass A11yGifPlayer extends SchemaBehaviors(PolymerElement) {\n  constructor() {\n    super();\n    import(\"@polymer/iron-image/iron-image.js\");\n  }\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n        :host #gifbutton > * {\n          position: relative;\n        }\n        :host #svg {\n          position: absolute;\n          top: 35%;\n          left: 35%;\n        }\n        :host #gifbutton:active,\n        :host #gifbutton:focus,\n        :host #gifbutton:hover {\n          cursor: pointer;\n          outline: 1px solid blue;\n        }\n        :host #preload {\n          display: none;\n        }\n      </style>\n      <div id=\"gifbutton\" aria-role=\"button\" aria-controls=\"gif\" tabindex=\"0\">\n        <div>\n          <img\n            id=\"gif\"\n            alt\\$=\"[[alt]]\"\n            src\\$=\"[[srcWithoutAnimation]]\"\n            style=\"width:100%;height:100%;\"\n          />\n          <svg\n            id=\"svg\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 200 200\"\n            width=\"30%\"\n            height=\"30%\"\n          >\n            <g opacity=\".5\">\n              <polygon\n                points=\"30,20 30,180 170,100\"\n                fill=\"#000000\"\n                stroke=\"#ffffff\"\n                stroke-width=\"15px\"\n              ></polygon>\n              <text x=\"50\" y=\"115\" fill=\"#ffffff\" font-size=\"40px\">GIF</text>\n            </g>\n          </svg>\n        </div>\n      </div>\n      <iron-image id=\"preload\" src\\$=\"[[src]]\" hidden=\"\"></iron-image>\n      <iron-a11y-keys\n        id=\"a11y\"\n        keys=\"enter space\"\n        on-keys-pressed=\"toggleAnimation\"\n      ></iron-a11y-keys>\n    `;\n  }\n  static get tag() {\n    return \"a11y-gif-player\";\n  }\n  static get properties() {\n    let props = {\n      /**\n       * Source of the animated gif\n       */\n      src: {\n        type: String,\n        value: null\n      },\n      /**\n       * Source of a version that is not animated\n       */\n      srcWithoutAnimation: {\n        type: String,\n        value: null\n      },\n      /**\n       * Alt text of the gif\n       */\n      alt: {\n        type: String,\n        value: null\n      }\n    };\n    if (super.properties) {\n      props = Object.assign(props, super.properties);\n    }\n    return props;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    afterNextRender(this, function() {\n      this.addEventListener(\"click\", this.toggleAnimation.bind(this));\n      this.HAXWiring = new HAXWiring();\n      this.HAXWiring.setup(\n        A11yGifPlayer.haxProperties,\n        A11yGifPlayer.tag,\n        this\n      );\n    });\n  }\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this.toggleAnimation.bind(this));\n    super.disconnectedCallback();\n  }\n  /**\n   * Ready life cycle\n   */\n  ready() {\n    super.ready();\n    this.stop();\n    this.shadowRoot.querySelector(\n      \"#a11y\"\n    ).target = this.shadowRoot.querySelector(\"#gifbutton\");\n  }\n  /**\n   * plays the animation regarless of previous state\n   */\n  play() {\n    this.__stopped = true;\n    this.toggleAnimation();\n  }\n  /**\n   * stops the animation regarless of previous state\n   */\n  stop() {\n    this.__stopped = false;\n    this.toggleAnimation();\n  }\n  /**\n   * toggles the animation based on current state\n   */\n  toggleAnimation() {\n    if (this.__stopped) {\n      this.__stopped = false;\n      this.shadowRoot.querySelector(\"#svg\").style.visibility = \"hidden\";\n      if (this.src != null) {\n        this.shadowRoot.querySelector(\"#gif\").src = this.src;\n      }\n      this.shadowRoot.querySelector(\"#gif\").alt =\n        this.alt + \" (Stop animation.)\";\n    } else {\n      this.__stopped = true;\n      this.shadowRoot.querySelector(\"#svg\").style.visibility = \"visible\";\n      if (this.srcWithoutAnimation != null) {\n        this.shadowRoot.querySelector(\"#gif\").src = this.srcWithoutAnimation;\n      }\n      this.shadowRoot.querySelector(\"#gif\").alt =\n        this.alt + \" (Play animation.)\";\n    }\n  }\n\n  static get haxProperties() {\n    return {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Accessible GIF\",\n        description: \"Makes animated GIFs accessible.\",\n        icon: \"gif\",\n        color: \"grey\",\n        groups: [\"Images\", \"Media\"],\n        handles: [\n          {\n            type: \"image\",\n            source: \"src\",\n            source2: \"srcWithoutAnimation\",\n            alt: \"alt\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"src\",\n            title: \"Animated GIF\",\n            description: \"The URL to your animated GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"srcWithoutAnimation\",\n            title: \"Still Image\",\n            description: \"The URL to a still image version of your GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"alt\",\n            title: \"Alt Text\",\n            description: \"Alternative text for the image.\",\n            inputMethod: \"textfield\",\n            icon: \"accessibility\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"src\",\n            title: \"Animated GIF\",\n            description: \"The URL to your animated GIF.\",\n            inputMethod: \"haxupload\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"srcWithoutAnimation\",\n            title: \"Still Image\",\n            description: \"The URL to a still image version of your GIF.\",\n            inputMethod: \"haxupload\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"alt\",\n            title: \"Alt Text\",\n            description: \"Alternative text for the image.\",\n            inputMethod: \"alt\",\n            icon: \"accessibility\",\n            required: true\n          }\n        ],\n        advanced: []\n      }\n    };\n  }\n}\nwindow.customElements.define(A11yGifPlayer.tag, A11yGifPlayer);\nexport { A11yGifPlayer };\n"],"names":["A11yGifPlayer","SchemaBehaviors","PolymerElement","html","props","src","type","String","value","srcWithoutAnimation","alt","Object","assign","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","source","source2","meta","author","settings","quick","property","inputMethod","validationType","required","configure","advanced","afterNextRender","this","addEventListener","toggleAnimation","bind","HAXWiring","setup","haxProperties","tag","removeEventListener","stop","shadowRoot","querySelector","target","__stopped","style","visibility","window","customElements","define"],"mappings":"y1JAiBMA,8KAGK,6RAHiBC,kBAAgBC,gEAMjCC,8CA2DA,yDAGHC,EAAQ,CAIVC,IAAK,CACHC,KAAMC,OACNC,MAAO,MAKTC,oBAAqB,CACnBH,KAAMC,OACNC,MAAO,MAKTE,IAAK,CACHJ,KAAMC,OACNC,MAAO,0CAITJ,EAAQO,OAAOC,OAAOR,8BAEjBA,8CAkEA,CACLS,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,iBACPC,YAAa,kCACbC,KAAM,MACNC,MAAO,OACPC,OAAQ,CAAC,SAAU,SACnBC,QAAS,CACP,CACEhB,KAAM,QACNiB,OAAQ,MACRC,QAAS,sBACTd,IAAK,QAGTe,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,MACVZ,MAAO,eACPC,YAAa,gCACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,sBACVZ,MAAO,cACPC,YAAa,gDACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,MACVZ,MAAO,WACPC,YAAa,kCACbY,YAAa,YACbX,KAAM,gBACNa,UAAU,IAGdC,UAAW,CACT,CACEJ,SAAU,MACVZ,MAAO,eACPC,YAAa,gCACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,sBACVZ,MAAO,cACPC,YAAa,gDACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,MACVZ,MAAO,WACPC,YAAa,kCACbY,YAAa,MACbX,KAAM,gBACNa,UAAU,IAGdE,SAAU,4GA7IdC,kBAAgBC,KAAM,gBACfC,iBAAiB,QAASD,KAAKE,gBAAgBC,KAAKH,YACpDI,UAAY,IAAIA,iBAChBA,UAAUC,MACbzC,EAAc0C,cACd1C,EAAc2C,IACdP,4DAKCQ,oBAAoB,QAASR,KAAKE,gBAAgBC,KAAKH,+IAQvDS,YACAC,WAAWC,cACd,SACAC,OAASZ,KAAKU,WAAWC,cAAc,kDAMpCE,WAAY,OACZX,sDAMAW,WAAY,OACZX,4DAMDF,KAAKa,gBACFA,WAAY,OACZH,WAAWC,cAAc,QAAQG,MAAMC,WAAa,SACzC,MAAZf,KAAK/B,WACFyC,WAAWC,cAAc,QAAQ1C,IAAM+B,KAAK/B,UAE9CyC,WAAWC,cAAc,QAAQrC,IACpC0B,KAAK1B,IAAM,4BAERuC,WAAY,OACZH,WAAWC,cAAc,QAAQG,MAAMC,WAAa,UACzB,MAA5Bf,KAAK3B,2BACFqC,WAAWC,cAAc,QAAQ1C,IAAM+B,KAAK3B,0BAE9CqC,WAAWC,cAAc,QAAQrC,IACpC0B,KAAK1B,IAAM,2DAyFnB0C,OAAOC,eAAeC,OAAOtD,EAAc2C,IAAK3C"}