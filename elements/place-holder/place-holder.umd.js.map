{"version":3,"file":"place-holder.umd.js","sources":["place-holder.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-icons/notification-icons.js\";\nimport \"@polymer/iron-icons/av-icons.js\";\nimport \"@polymer/iron-icons/device-icons.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@lrnwebcomponents/materializecss-styles/materializecss-styles.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\n/**\n * `place-holder`\n * Placeholder for a piece of media in the future\n *\n * @demo demo/index.html\n *\n * @microcopy - the mental model for this element\n * - placeholder is a grey block on the page which can respond to drag and drop\n */\nlet PlaceHolder = Polymer({\n  _template: html`\n    <style include=\"materializecss-styles-colors\">\n      :host {\n        display: block;\n        border: none;\n        transition: .6s border ease-in-out;\n      }\n      :host([drag-over]) {\n        border: 4px dashed #2196F3;\n      }\n      .placeholder-inner {\n        text-align: center;\n        padding: 16px;\n      }\n      iron-icon.placeholder-icon {\n        margin: 0 auto;\n        width: 50%;\n        height: 50%;\n        display: block;\n      }\n      .placeholder-text {\n        line-height: 16px;\n        font-size: 12px;\n        font-style: italic;\n      }\n    </style>\n    <div class=\"placeholder-inner grey lighten-3 grey-text text-darken-3\">\n      <iron-icon icon=\"[[iconFromType]]\" class=\"placeholder-icon\"></iron-icon>\n      <span class=\"placeholder-text\">[[calcText]]</span>\n    </div>\n`,\n\n  is: \"place-holder\",\n\n  behaviors: [HAXBehaviors.PropertiesBehaviors],\n\n  listeners: {\n    dblclick: \"fireReplaceEvent\"\n  },\n\n  properties: {\n    /**\n     * calculate an icon based on the type that was used\n     */\n    iconFromType: {\n      type: String,\n      computed: \"_getIconFromType(type, dragOver)\"\n    },\n    /**\n     * Text place holder for describing this place holder element.\n     */\n    text: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * Calculate text based on the type in the event we have no default.\n     */\n    calcText: {\n      type: String,\n      computed: \"_getCalcText(text, type, dragOver)\"\n    },\n    /**\n     * A media type to visualize and also bubble events off of.\n     */\n    type: {\n      type: String,\n      value: \"text\"\n    },\n    /**\n     * Bind dragging state to a variable so we can apply CSS.\n     */\n    dragOver: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Fire an event for things to react to above us\n   */\n  fireReplaceEvent: function(e) {\n    this.fire(\"place-holder-replace\", this.type);\n  },\n\n  /**\n   * Get the calculated text based on text being empty and type being set.\n   */\n  _getCalcText: function(text, type, dragOver) {\n    if (dragOver) {\n      return \"Upload file\";\n    } else if (text === \"\") {\n      return \"Place holder for future \" + type + \".\";\n    } else {\n      return text;\n    }\n  },\n\n  /**\n   * Generate an icon based on the media type selected\n   * for the place holder.\n   */\n  _getIconFromType: function(type, dragOver) {\n    if (!dragOver) {\n      switch (type) {\n        case \"document\":\n          return \"editor:insert-drive-file\";\n          break;\n        case \"audio\":\n          return \"av:music-video\";\n          break;\n        case \"video\":\n          return \"notification:ondemand-video\";\n          break;\n        case \"image\":\n          return \"image:crop-original\";\n          break;\n        case \"math\":\n          return \"editor:functions\";\n          break;\n        case \"text\":\n        default:\n          return \"editor:format-align-left\";\n          break;\n      }\n    } else {\n      // we are dragging, ignore icon\n      return \"icons:file-upload\";\n    }\n  },\n\n  /**\n   * Attached event handlers for drag and drop.\n   */\n  ready: function() {\n    if (typeof this.__dropAdded === typeof undefined) {\n      this.__dropAdded = true;\n      this.addEventListener(\"dragover\", function(e) {\n        this.dragOver = true;\n        e.preventDefault();\n        e.stopPropagation();\n        this.classList.add(\"dragover\");\n      });\n\n      this.addEventListener(\"dragleave\", function(e) {\n        this.dragOver = false;\n        e.preventDefault();\n        e.stopPropagation();\n        this.classList.remove(\"dragover\");\n      });\n      // self bind a drop event enough though something else\n      // will need to step in and do something with this.\n      // We are just making sure that this doesn't redirect the browser.\n      this.addEventListener(\"drop\", function(e) {\n        this.dragOver = false;\n        e.preventDefault();\n        e.stopPropagation();\n        this.classList.remove(\"dragover\");\n        // this helps ensure that what gets drag and dropped is a file\n        // this prevents issues with selecting and dragging text (which triggers drag/drop)\n        // as well as compatibility with things that are legit in a draggable state\n        try {\n          if (e.dataTransfer.items[0].kind === \"file\") {\n            e.placeHolderElement = this;\n            // fire this specialized event up so things like HAX can intercept\n            this.fire(\"place-holder-file-drop\", e);\n          }\n        } catch (e) {}\n      });\n    }\n  },\n\n  /**\n   * Attached to the DOM, now fire.\n   */\n  attached: function() {\n    // Establish hax property binding\n    let props = {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Placeholder content\",\n        description:\n          \"A place holder that can be converted into the media type that's been selected\",\n        icon: \"image:transform\",\n        color: \"grey\",\n        groups: [\"Placeholder\"],\n        handles: [],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [],\n        configure: [\n          {\n            property: \"type\",\n            title: \"Type\",\n            description: \"Type of gizmo that this accepts for replacement.\",\n            inputMethod: \"select\",\n            options: {\n              text: \"Text / content\",\n              document: \"Document / file\",\n              audio: \"Audio\",\n              video: \"Video\",\n              image: \"Image\",\n              math: \"Math\"\n            }\n          }\n        ],\n        advanced: []\n      },\n      saveOptions: {\n        wipeSlot: true\n      }\n    };\n    this.setHaxProperties(props);\n  }\n});\nexport { PlaceHolder };\n"],"names":["PlaceHolder","Polymer","_template","html","is","behaviors","HAXBehaviors","PropertiesBehaviors","listeners","dblclick","properties","iconFromType","type","String","computed","text","value","calcText","dragOver","Boolean","reflectToAttribute","fireReplaceEvent","e","fire","this","_getCalcText","_getIconFromType","ready","_typeof","__dropAdded","addEventListener","preventDefault","stopPropagation","classList","add","remove","dataTransfer","items","kind","placeHolderElement","attached","setHaxProperties","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","meta","author","settings","quick","configure","property","inputMethod","options","document","audio","video","image","math","advanced","saveOptions","wipeSlot"],"mappings":"8uEAkBIA,EAAcC,UAAQ,CACxBC,UAAWC,YAgCXC,GAAI,eAEJC,UAAW,CAACC,aAAaC,qBAEzBC,UAAW,CACTC,SAAU,oBAGZC,WAAY,CAIVC,aAAc,CACZC,KAAMC,OACNC,SAAU,oCAKZC,KAAM,CACJH,KAAMC,OACNG,MAAO,IAKTC,SAAU,CACRL,KAAMC,OACNC,SAAU,sCAKZF,KAAM,CACJA,KAAMC,OACNG,MAAO,QAKTE,SAAU,CACRN,KAAMO,QACNH,OAAO,EACPI,oBAAoB,IAOxBC,iBAAkB,SAASC,QACpBC,KAAK,uBAAwBC,KAAKZ,OAMzCa,aAAc,SAASV,EAAMH,EAAMM,UAC7BA,EACK,cACW,KAATH,EACF,2BAA6BH,EAAO,IAEpCG,GAQXW,iBAAkB,SAASd,EAAMM,MAC1BA,QAwBI,2BAvBCN,OACD,iBACI,+BAEJ,cACI,qBAEJ,cACI,kCAEJ,cACI,0BAEJ,aACI,uBAEJ,qBAEI,6BAYfe,MAAO,yBACDC,EAAOJ,KAAKK,oBACTA,aAAc,OACdC,iBAAiB,WAAY,SAASR,QACpCJ,UAAW,EAChBI,EAAES,iBACFT,EAAEU,uBACGC,UAAUC,IAAI,mBAGhBJ,iBAAiB,YAAa,SAASR,QACrCJ,UAAW,EAChBI,EAAES,iBACFT,EAAEU,uBACGC,UAAUE,OAAO,mBAKnBL,iBAAiB,OAAQ,SAASR,QAChCJ,UAAW,EAChBI,EAAES,iBACFT,EAAEU,uBACGC,UAAUE,OAAO,gBAKiB,SAAjCb,EAAEc,aAAaC,MAAM,GAAGC,OAC1BhB,EAAEiB,mBAAqBf,UAElBD,KAAK,yBAA0BD,IAEtC,MAAOA,SAQfkB,SAAU,gBA0CHC,iBAxCO,CACVC,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,sBACPC,YACE,gFACFC,KAAM,kBACNC,MAAO,OACPC,OAAQ,CAAC,eACTC,QAAS,GACTC,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,GACPC,UAAW,CACT,CACEC,SAAU,OACVX,MAAO,OACPC,YAAa,mDACbW,YAAa,SACbC,QAAS,CACP5C,KAAM,iBACN6C,SAAU,kBACVC,MAAO,QACPC,MAAO,QACPC,MAAO,QACPC,KAAM,UAIZC,SAAU,IAEZC,YAAa,CACXC,UAAU"}