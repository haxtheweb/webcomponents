<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>SimplePopover: simple-popover Demo</title>
    
    <script src="../../../node_modules/@haxtheweb/deduping-fix/deduping-fix.js"></script>

    <script type="module">
      
      import "@haxtheweb/utils/lib/demo-snippet.js";
      import '../simple-popover.js';
      import '../lib/simple-tour.js';
      import '../lib/simple-popover-selection.js';
    </script>
    <style is="custom-style" include="demo-pages-shared-styles">
      simple-popover {
        width: 50px;
      }
      [part="simple-tour-active"] {
        transition: .25s ease-in-out all;
        outline: 3px solid red;
      }
      [contenteditable]{
        padding: 0 150px;
      }
    </style>
  </head>
  <body>
    <div class="vertical-section-container centered">
      <h3>Basic simple-popover demo</h3>
      <demo-snippet>
        <template>
          <button id="tourbtn">Start tour 1</button>
          <button id="tourbtn2">Start tour 2</button>
          <simple-popover-selection id="popover" event="hover">
            <button slot="button">Selection area</button>
            <button slot="options" value="1">Option 1</button>
            <button slot="options" value="cool">Option 2</button>
            <button slot="options" value="stuff">Option 3</button>
          </simple-popover-selection>
          <simple-popover-selection id="popover2">
            <button slot="button">Selection area</button>
            <button slot="options" value="1">Option 3</button>
            <button slot="options" value="cool">Option 4</button>
            <button slot="options" value="stuff">Option 5</button>
          </simple-popover-selection>
          <simple-popover-selection id="popover3">
            <button slot="button">Selection area</button>
            <button slot="options" value="1">Option 5</button>
            <button slot="options" value="cool">Option 6</button>
            <button slot="options" value="stuff">Option 7</button>
          </simple-popover-selection>
          <div contenteditable="true">
            <p id="p1">
              Aenean eget nisl volutpat, molestie purus eget, bibendum metus. 
              Pellentesque magna velit, tincidunt quis pharetra id, gravida 
              placerat erat. Maecenas id dui pretium risus pulvinar feugiat 
              vel nec leo. Praesent non congue tellus. Suspendisse ac tincidunt 
              purus. Donec eu dui a metus vehicula bibendum sed nec tortor. 
              Nunc convallis justo sed nibh consectetur, at pharetra nulla 
              accumsan.
            </p>
            <p id="p2">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
              <simple-popover-selection event="hover">
                <span slot="button">Quisque porta</span>
                <span slot="options">All the contents</span>
              </simple-popover-selection>, dolor at pharetra condimentum, elit tellus 
              scelerisque lacus, ut placerat lectus quam in massa. 
              Donec sit amet sapien vitae nibh ultricies hendrerit sit 
              amet dignissim justo. Orci varius natoque penatibus et 
              magnis dis parturient montes, nascetur ridiculus mus. 
              Vivamus volutpat sem leo, sed porttitor elit convallis at. 
              Quisque vel consequat risus. Fusce auctor nibh vitae 
              leo bibendum faucibus. Etiam aliquam neque sit amet maximus 
              lacinia. Duis ut libero eget augue egestas suscipit. 
            </p>
            <p id="p3">
              Stuff and things happen here
            </p>
          </div>
          <script>
            document.getElementById('tourbtn').addEventListener('click', (e) => {
              let tour = window.SimpleTourManager.requestAvailability();
              tour.registerNewTour({key:'hax', name: "Learn hax"});
              tour.createTourStop('hax', document.getElementById('p1'), "tb", "Paragraph 1", "<p>I love this paragraph, it is the <strong>greatest</strong></p>");
              tour.createTourStop('hax', document.getElementById('p2'), "tb", "Paragraph 2", "<p>I love this paragraph, it is the <strong>greatest</strong></p>");
              tour.createTourStop('hax', document.getElementById('p3'), "tb", "Paragraph 3", "<p>I love this paragraph, it is the <strong>greatest</strong></p>");
              window.SimpleTourManager.requestAvailability().startTour('hax');
            });
            document.getElementById('tourbtn2').addEventListener('click', (e) => {
              let tour = window.SimpleTourManager.requestAvailability();
              tour.registerNewTour({key:'hax2', name: "Learn hax again"});
              tour.createTourStop('hax2', document.getElementById('p3'),"tb", "Whatevers 1", "<p>YOU MONSTER</p>");
              tour.createTourStop('hax2', document.getElementById('p3'),"tb", "Cool 2", "<p>You did this</p>");
              tour.createTourStop('hax2', document.getElementById('p1'),"tb", "SHings", "<p>I love this paragraph, it is the <strong>greatest</strong></p>");
              window.SimpleTourManager.requestAvailability().startTour('hax2');
            });
            // say what bubbled up
            document.getElementById('popover').addEventListener('simple-popover-selection-changed', (e) => {
              alert(e.detail);
            });
            document.getElementById('popover2').addEventListener('simple-popover-selection-changed', (e) => {
              alert(e.detail);
            });
            document.getElementById('popover3').addEventListener('simple-popover-selection-changed', (e) => {
              alert(e.detail);
            });
          </script>
        </template>
      </demo-snippet>
    </div>
  </body>
</html>
