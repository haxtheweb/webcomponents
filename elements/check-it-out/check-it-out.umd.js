!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/simple-modal/lib/simple-modal-template.js"),require("@lrnwebcomponents/iframe-loader/iframe-loader.js"),require("@lrnwebcomponents/video-player/video-player.js"),require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/intersection-element/lib/IntersectionObserverMixin.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/simple-modal/lib/simple-modal-template.js","@lrnwebcomponents/iframe-loader/iframe-loader.js","@lrnwebcomponents/video-player/video-player.js","lit-element/lit-element.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/intersection-element/lib/IntersectionObserverMixin.js"],t):t((e=e||self).CheckItOut={},e.$$0,null,null,e.litElement_js,null,null,e.IntersectionObserverMixin_js)}(this,function(e,t,n,o,i,r,c,l){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return m(this,n)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function k(){var e=y(['\n        :host {\n          display: block;\n          --check-it-out-content-width: var(\n            --check-it-out-container-width,\n            800px\n          );\n          --check-it-out-content-height: 500px;\n        }\n\n        .container {\n          display: none;\n          position: relative;\n          width: var(--check-it-out-container-width, 800px);\n        }\n\n        :host([checked-out]) .container {\n          display: flex;\n        }\n\n        .check-it-out-btn {\n          display: inline-flex;\n          background-color: transparent;\n          font-size: var(--check-it-out-modal-button-font-size, 18px);\n          border: 2px solid var(--check-it-out-button-border-color, #000);\n          font-weight: 700;\n          padding: 10px 25px;\n        }\n\n        .check-it-out-btn:active,\n        .check-it-out-btn:focus,\n        .check-it-out-btn:hover {\n          outline: 2px dashed var(--check-it-out-button-border-color, #000);\n          outline-offset: 2px;\n        }\n\n        :host([checked-out]) .check-it-out-btn {\n          display: none;\n        }\n\n        :host([checked-out]) .close-btn {\n          display: flex;\n        }\n\n        .close-btn {\n          display: none;\n          border-radius: 50%;\n          padding: 0.5em;\n          width: 30px;\n          height: 30px;\n          border: 2px solid black;\n          color: grey;\n          position: absolute;\n          top: -10px;\n          right: -10px;\n          z-index: 2;\n        }\n\n        .close-btn:hover {\n          border: 2px solid black;\n          background-color: grey;\n          color: #ffffff;\n        }\n\n        .close-btn::before {\n          content: " ";\n          position: absolute;\n          background-color: black;\n          width: 2px;\n          left: 12px;\n          top: 5px;\n          bottom: 5px;\n          transform: rotate(45deg);\n        }\n\n        .close-btn::after {\n          content: " ";\n          position: absolute;\n          background-color: black;\n          height: 2px;\n          top: 12px;\n          left: 5px;\n          right: 5px;\n          transform: rotate(45deg);\n        }\n        simple-modal-template[modal-id="m1"] {\n          --simple-modal-width: var(--check-it-out-modal-width, 80vw);\n          --simple-modal-height: var(--check-it-out-modal-height, 55vh);\n          --simple-modal-min-width: var(--check-it-out-modal-width, 80vw);\n          --simple-modal-min-height: var(--check-it-out-modal-height, 55vh);\n        }\n\n        .iframe-container {\n          width: var(--check-it-out-content-width, 800px);\n          height: var(--check-it-out-content-height, 500px);\n        }\n\n        .video-player {\n          width: var(--check-it-out-content-width, 800px);\n          height: var(--check-it-out-content-height, 500px);\n        }\n        iframe-loader {\n          text-align: center;\n          display: block;\n          width: var(--check-it-out-content-width, 800px);\n        }\n      ']);return k=function(){return e},e}function g(){var e=y(['\n                    <button\n                      class="close-btn"\n                      @click="','"\n                    ></button>\n                  ']);return g=function(){return e},e}function w(){var e=y(['\n            <div class="container">\n              <video-player\n                class="video-player"\n                source=',"\n              >\n              </video-player>\n              ","\n            </div>\n          "]);return w=function(){return e},e}function x(){var e=y(['\n                    <button\n                      class="close-btn"\n                      @click="','"\n                    ></button>\n                  ']);return x=function(){return e},e}function O(){var e=y(['<div class="container">\n            <iframe-loader>\n              <iframe\n                class="iframe-container"\n                src=','\n                loading="lazy"\n              ></iframe>\n              ',"\n            </iframe-loader>\n          </div>"]);return O=function(){return e},e}function j(){var e=y(["\n      ","\n    "]);return j=function(){return e},e}function P(){var e=y([" "," "]);return P=function(){return e},e}function _(){var e=y(['\n                <simple-modal-template\n                  title="','"\n                  @click="','"\n                  modal-id="m1"\n                >\n                  <div slot="content">\n                    \x3c!-- bandaid and a terrible one --\x3e\n                    <style>\n                      simple-modal .container {\n                        display: block;\n                        position: relative;\n                        width: var(--check-it-out-container-width, 70vw);\n                      }\n                      simple-modal .container .iframe-container {\n                        width: var(--check-it-out-content-width, 70vw);\n                        height: var(--check-it-out-content-height, 45vh);\n                      }\n\n                      simple-modal .container .video-player {\n                        width: var(--check-it-out-content-width, 70vw);\n                        height: var(--check-it-out-content-height, 45vh);\n                      }\n                      simple-modal .container iframe-loader {\n                        text-align: center;\n                        display: block;\n                        width: var(--check-it-out-content-width, 45vh);\n                      }\n                    </style>\n                    ',"\n                  </div>\n                </simple-modal-template>\n              "]);return _=function(){return e},e}function S(){var e=y(['\n          <button\n            class="check-it-out-btn"\n            @click="','"\n            controls="m1"\n          >\n            <simple-icon-lite icon="','"> </simple-icon-lite>\n            ',"\n            <slot></slot>\n          </button>\n          ","\n        "]);return S=function(){return e},e}function E(){var e=y([" ",""]);return E=function(){return e},e}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.IntersectionObserverMixin(i.LitElement));var n=b(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this)).typeIconObj={code:"code",pdf:"book",video:"av:play-arrow"},e.icon="code",e.modalTitle="",e.checkedOut=!1,e.type="",e.hideExplorer=!1,e.ctl=!1,e.view="both",e}return u(o,[{key:"render",value:function(){return this.icon=this.icon?this.icon:this.typeIconObj[this.type],i.html(E(),this.elementVisible?i.html(S(),this._handleClick,this.icon,this.label,this.modal?i.html(_(),this.modalTitle,this._handleClick,this.renderLogic()):i.html(P(),this.renderLogic())):"")}},{key:"renderLogic",value:function(){return i.html(j(),["code","pdf"].includes(this.type)?i.html(O(),this.__computedSource,this.modal?"":i.html(x(),this._handleClick)):i.html(w(),this.__computedSource,this.modal?"":i.html(g(),this._handleClick)))}}],[{key:"haxProperties",get:function(){return{canScale:!1,canPosition:!1,canEditSource:!0,gizmo:{title:"Check it out",description:"Clickable button for media and code previews",icon:"check-circle",color:"grey",groups:["developer","code","video","pdf"],handles:[],meta:{author:"collinkleest",owner:"ELMS:LN"}},settings:{configure:[{property:"source",title:"Resource url",description:"Resource url",inputMethod:"textfield"},{property:"icon",title:"Icon",description:"Icon for button",inputMethod:"textfield"},{property:"type",title:"Type of resource",description:"Type of resource in url (video, code, pdf)",inputMethod:"select",options:{code:"Code Snippet",video:"Video",pdf:"PDF / Document"}},{property:"label",title:"Button label",description:"Text to display in check-it-out button",inputMethod:"textfield"},{property:"modal",title:"Enable Modal Mode",description:"Puts content inside a popup modal",inputMethod:"boolean"},{property:"modal-title",title:"Popup Modal Title",description:"Puts a title at the top of popup modal",inputMethod:"textfield"},{property:"filePath",title:"File Path",description:"File path for stackblitz embed",inputMethod:"textfield"},{property:"hideExplorer",title:"Hide file explorer",description:"Hide the file explorer in a stackblitz embed",inputMethod:"boolean"},{property:"ctl",title:"Click to load stackblitz",description:"Require click to load stackblitz embed",inputMethod:"boolean"},{property:"view",title:"View",description:"Stackblitz default view (preview, editor, or both)",inputMethod:"select",options:{preview:"Preview",editor:"Editor",both:"Both"}}],advanced:[]},demoSchema:[{tag:"check-it-out",properties:{org:"elmsln",repo:"lrnwebcomponents"},content:""}]}}},{key:"properties",get:function(){return d(d({},v(h(o),"properties",this)),{},{checkedOut:{type:Boolean,attribute:"checked-out",reflect:!0},source:{type:String},icon:{type:String},__computedSource:{type:String},type:{type:String,reflect:!0},label:{type:String,reflect:!0},filePath:{type:String,attribute:"file-path"},modalTitle:{type:String,attribute:"modal-title"},hideExplorer:{type:Boolean,attribute:"hide-explorer"},ctl:{type:Boolean},view:{type:String},modal:{type:Boolean,reflect:!0}})}},{key:"styles",get:function(){return[i.css(k())]}},{key:"tag",get:function(){return"check-it-out"}}]),u(o,[{key:"_handleClick",value:function(e){this._haxstate&&this.modal?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()):this._haxstate||this.modal||(this.checkedOut?this.checkedOut=!1:this.checkedOut=!0)}},{key:"haxHooks",value:function(){return{editModeChanged:"haxeditModeChanged",activeElementChanged:"haxactiveElementChanged"}}},{key:"haxactiveElementChanged",value:function(e,t){t&&(this._haxstate=t)}},{key:"haxeditModeChanged",value:function(e){this._haxstate=e}},{key:"checkType",value:function(e){return[".mp4",".mkv",".flv",".wmv",".ovg",".webm",".mov"].filter(function(t){return e.endsWith(t)}).length>0||e.includes("youtube.com")?this.type="video":e.endsWith(".pdf")?this.type="pdf":e.includes("stackblitz.com")?(this.type="code",e.includes("embed=1")||(e.includes("?")?e+="&embed=1":e+="?embed=1"),e=this.checkStackblitzProps(e)):e.includes("codepen.io")&&(this.type="code",e.includes("embed")||(e=e.replace("/pen/","/embed/"))),this.type,e}},{key:"checkStackblitzProps",value:function(e){return this.filePath&&(e+="&file="+this.filePath),this.hideExplorer&&(e+="&hideExplorer=1"),this.ctl&&(e+="&ctl=1"),e+="&view=".concat(this.view)}},{key:"updated",value:function(e){var n=this;v(h(o.prototype),"updated",this)&&v(h(o.prototype),"updated",this).call(this,e),e.forEach(function(e,o){"modal"===o&&n[o]&&Promise.resolve(t).then(function(){n.shadowRoot&&n.shadowRoot.querySelector('[modal-id="m1"]').associateEvents(n.shadowRoot.querySelector('[controls="m1"]'))}),"source"===o&&n[o]&&(clearTimeout(n.__debounce),n.__debounce=setTimeout(function(){n.__computedSource=n.checkType(n.source)},0))})}}]),o}();customElements.define(M.tag,M),e.CheckItOut=M,Object.defineProperty(e,"__esModule",{value:!0})});
