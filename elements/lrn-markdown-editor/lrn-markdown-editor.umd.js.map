{"version":3,"file":"lrn-markdown-editor.umd.js","sources":["lib/lrn-markdown-editor-editor.js","lrn-markdown-editor.umd.js"],"sourcesContent":["import { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/mtz-marked-editor.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-wrap.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-line.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-link.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-icons/places-icons.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/paper-input/paper-textarea.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nclass LrnMarkdownEditorEditor extends LitElement {\n  /**\n   * LitElement constructable styles enhancement\n   */\n  static get styles() {\n    return [\n      css`\n      :host {\n          display: block;\n        }\n\n      .mtz-controls {\n        display: flex;\n        width: 100%;\n      }\n\n      .mtz-toolbar {\n        flex-grow: 5;\n      }\n      `\n    ];\n  }\n  /**\n   * LitElement render\n   */\n  render() {\n    return html`\n      <mtz-marked-editor id=\"markededitor\">\n        <div slot=\"controls\" class=\"mtz-controls\">\n          <mtz-marked-control-generic-wrap\n            icon=\"editor:format-bold\"\n            title=\"Bold\"\n            syntax-prefix=\"**\"\n            syntax-suffix=\"**\"\n            keys=\"ctrl+b\"\n          ></mtz-marked-control-generic-wrap>\n          <mtz-marked-control-generic-wrap\n            icon=\"editor:format-italic\"\n            title=\"Italic\"\n            syntax-prefix=\"_\"\n            syntax-suffix=\"_\"\n            keys=\"ctrl+i\"\n          ></mtz-marked-control-generic-wrap>\n          <mtz-marked-control-generic-line\n            icon=\"editor:format-size\"\n            title=\"Heading\"\n            syntax-prefix=\"# \"\n          ></mtz-marked-control-generic-line>\n          <mtz-marked-control-generic-line\n            icon=\"editor:format-list-numbered\"\n            title=\"Ordered List\"\n            syntax-prefix=\"1. \"\n          ></mtz-marked-control-generic-line>\n          <mtz-marked-control-generic-line\n            icon=\"editor:format-list-bulleted\"\n            title=\"Unordered List\"\n            syntax-prefix=\"- \"\n          ></mtz-marked-control-generic-line>\n          <mtz-marked-control-link\n            icon=\"editor:insert-link\"\n            title=\"Link\"\n          ></mtz-marked-control-link>\n        </div>\n        <paper-textarea\n          slot=\"textarea\"\n          label=\"Start typing...\"\n          value=\"${this.content}\"\n          @value-changed=\"${this._contentChanged}\"\n        ></paper-textarea>\n      </mtz-marked-editor>\n    `;\n  }\n  _contentChanged(e) {\n    this.content = e.detail.value;\n  }\n  static get tag() {\n    return \"lrn-markdown-editor-editor\";\n  }\n\n  static get properties() {\n    return {\n      content: {\n        type: String,\n      }\n    };\n  }\n  /**\n   * LitElement properties changed\n   */\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      if (propName === 'content') {\n        // notify\n        this.dispatchEvent(\n          new CustomEvent(\"content-changed\", {\n            detail: {\n              value: this[propName],\n            }\n          })\n        );\n      }\n    });\n  }\n\n  _changed(e) {\n    var content = this.shadowRoot.querySelector(\"#markededitor\").getContent();\n    this.content = content;\n    this.dispatchEvent(\n      new CustomEvent(\"content-updated\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: { content: this.content }\n      })\n    );\n  }\n}\nwindow.customElements.define(\n  LrnMarkdownEditorEditor.tag,\n  LrnMarkdownEditorEditor\n);\nexport { LrnMarkdownEditorEditor };\n","/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport \"@polymer/paper-tabs/paper-tabs.js\";\nimport \"@polymer/marked-element/marked-element.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"./lib/lrn-markdown-editor-editor.js\";\n/**\n * `lrn-markdown-editor`\n * `Side by side markdown to HTML editor + preview pane`\n *\n * @microcopy - language worth noting:\n *  - often used for quick field editing interfaces w/ minimal input allowed\n * @polymer\n * @customElement\n * @demo demo/index.html\n */\nclass LrnMarkdownEditor extends LitElement {\n  /**\n   * LitElement constructable styles enhancement\n   */\n  static get styles() {\n    return [\n      css`\n      :host {\n        display: block;\n      }\n\n      #split-pane {\n        display: flex;\n      }\n\n      .split-pane > * {\n        flex: 1 1 auto;\n        min-height: 160px;\n      }\n\n      .preview-pane {\n        background: lightblue;\n      }\n\n      div.pane {\n        padding: 16px;\n        width: calc(100% - 32px);\n      }\n\n      paper-tabs {\n        background: #f5f5f5;\n        border-style: solid;\n        border-color: #dcdcdc;\n        border-width: 1px;\n        min-width: 500px;\n      }\n\n      marked-element.lrn-markdown-editor {\n        width: 100%;\n        word-wrap: break-word;\n      }\n\n      .container-flex {\n        display: flex;\n        flex-wrap: nowrap;\n      }\n\n      .split-pane .container-flex > * {\n        width: 50%;\n      }\n\n      .split-pane marked-element {\n        width: calc(100% - 32px);\n        min-width: 150px;\n        margin: 0 16px;\n        padding: 0 16px;\n        background: #fff;\n        border-left: solid #dcdcdc 1px;\n      }\n      `\n    ];\n  }\n  /**\n   * LitElement render\n   */\n  render() {\n    return html`\n      <div class=\"mtz-toolbar\">\n        <paper-tabs\n          selected=\"${this.selected}\"\n          @selected-changed=\"${this.__selectedChanged}\">\n          <paper-tab>Write</paper-tab>\n          <paper-tab>Preview</paper-tab>\n          <paper-tab>Split View</paper-tab>\n        </paper-tabs>\n      </div>\n\n      <iron-pages \n      selected=\"${this.selected}\"\n      @selected-changed=\"${this.__selectedChanged}\">\n        <section>\n          <div class=\"pane\">\n            <lrn-markdown-editor-editor\n              content=\"${this.content}\"\n              @content-changed=\"${this.__contentChanged}\"\n            ></lrn-markdown-editor-editor>\n          </div>\n        </section>\n\n        <section>\n          <div class=\"pane\">\n            <marked-element\n              markdown=\"${this.content}\"\n              @markdown-changed=\"${this.__contentChanged}\"></marked-element>\n          </div>\n        </section>\n\n        <section class=\"split-pane\">\n          <div class=\"pane\">\n            <div class=\"container-flex\">\n              <lrn-markdown-editor-editor\n                content=\"${this.content}\"\n                @content-changed=\"${this.__contentChanged}\"\n              ></lrn-markdown-editor-editor>\n              <marked-element\n                class=\"preview-pane\"\n                markdown=\"${this.content}\"\n                @markdown-changed=\"${this.__contentChanged}\"\n              ></marked-element>\n            </div>\n          </div>\n        </section>\n      </iron-pages>\n    `;\n  }\n  __selectedChanged(e) {\n    this.selected = e.detail.value;\n  }\n  __contentChanged(e) {\n    this.content = e.detail.value;\n  }\n  constructor() {\n    super();\n    this.selected = \"0\"\n    this.layout = \"0\"\n    this.content = '';\n    this.cookies = true;\n    this.elReady = false;\n  }\n  static get tag() {\n    return \"lrn-markdown-editor\";\n  }\n\n  static get properties() {\n    return {\n      content: {\n        type: String,\n      },\n      selected: {\n        type: String,\n        reflect: true\n      },\n      layout: {\n        type: String,\n      },\n      cookies: {\n        type: Boolean,\n      },\n      elReady: {\n        type: Boolean,\n        attribute: 'el-ready'\n      }\n    };\n  }\n  /**\n   * LitElement properties notice\n   */\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      if (propName == 'selected') {\n        this._selectedChanged(this[propName]);\n      }\n      if (propName === 'content') {\n        // notify\n        this.dispatchEvent(\n          new CustomEvent(\"content-changed\", {\n            detail: {\n              value: this[propName],\n            }\n          })\n        );\n      }\n    });\n  }\n  static get observers() {\n    return [\"_selectedChanged(selected)\"];\n  }\n\n  _selectedChanged(selected) {\n    var cookieName = this._getCookieName();\n    // get current cookies\n    // if the 'split-view' pane is selected\n    if (selected === 2) {\n      // add a cookie for lrn-markdown-editor-splitview\n      this._createCookie(cookieName, \"true\", \"30\");\n    } else if (selected !== 2 && this.elReady === true) {\n      /**\n       * @todo: this is erasing the cookie erroneously\n       */\n      this._eraseCookie(cookieName);\n    }\n  }\n\n  _createCookie(name, value, days) {\n    var expires = \"\";\n    if (days) {\n      var date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n  }\n\n  _readCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(\";\");\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) == \" \") c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  }\n\n  _eraseCookie(name) {\n    this._createCookie(name, \"\", -1);\n  }\n\n  _getCookieName() {\n    return \"lrnmarkdowneditorsplitview\";\n  }\n\n  firstUpdated(changedProperties) {\n    // tell others we are ready\n    this.elReady = true;\n    // get the cookie for splitview\n    var cookieName = this._getCookieName();\n    var cookie = this._readCookie(cookieName);\n    // if there is a cookie set for splitview\n    if (cookie && cookie === \"true\") {\n      // show splitview pane\n      this.selected = 2;\n    }\n  }\n}\nwindow.customElements.define(LrnMarkdownEditor.tag, LrnMarkdownEditor);\nexport { LrnMarkdownEditor };\n"],"names":["LrnMarkdownEditorEditor","LitElement","html","this","content","_contentChanged","e","detail","value","changedProperties","forEach","oldValue","propName","_this","dispatchEvent","CustomEvent","shadowRoot","querySelector","getContent","bubbles","cancelable","composed","css","type","String","window","customElements","define","tag","LrnMarkdownEditor","selected","layout","cookies","elReady","__selectedChanged","__contentChanged","_this2","_selectedChanged","cookieName","_getCookieName","_createCookie","_eraseCookie","name","days","expires","date","Date","setTime","getTime","toUTCString","document","cookie","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","_readCookie","reflect","Boolean","attribute"],"mappings":"26IAUMA,0FAAgCC,yDA0B3BC,WAwCQC,KAAKC,QACID,KAAKE,yDAKfC,QACTF,QAAUE,EAAEC,OAAOC,sCAgBlBC,cACNA,EAAkBC,QAAQ,SAACC,EAAUC,GAClB,YAAbA,GAEFC,EAAKC,cACH,IAAIC,YAAY,kBAAmB,CACjCR,OAAQ,CACNC,MAAOK,EAAKD,0CAQfN,OACHF,EAAUD,KAAKa,WAAWC,cAAc,iBAAiBC,kBACxDd,QAAUA,OACVU,cACH,IAAIC,YAAY,kBAAmB,CACjCI,SAAS,EACTC,YAAY,EACZC,UAAU,EACVd,OAAQ,CAAEH,QAASD,KAAKC,mDA3GrB,CACLkB,8CAsEK,sEAIA,CACLlB,QAAS,CACPmB,KAAMC,q8EAmCdC,OAAOC,eAAeC,OACpB3B,EAAwB4B,IACxB5B,OC9GI6B,8EA2HGC,SAAW,MACXC,OAAS,MACT3B,QAAU,KACV4B,SAAU,IACVC,SAAU,eA/HahC,yDAkErBC,WAGWC,KAAK2B,SACI3B,KAAK+B,kBAQlB/B,KAAK2B,SACI3B,KAAK+B,kBAIP/B,KAAKC,QACID,KAAKgC,iBAQbhC,KAAKC,QACID,KAAKgC,iBAQbhC,KAAKC,QACID,KAAKgC,iBAIbhC,KAAKC,QACID,KAAKgC,4DAQtB7B,QACXwB,SAAWxB,EAAEC,OAAOC,+CAEVF,QACVF,QAAUE,EAAEC,OAAOC,6CAlHjB,CACLc,mDAuJIb,cACNA,EAAkBC,QAAQ,SAACC,EAAUC,GACnB,YAAZA,GACFwB,EAAKC,iBAAiBD,EAAKxB,IAEZ,YAAbA,GAEFwB,EAAKtB,cACH,IAAIC,YAAY,kBAAmB,CACjCR,OAAQ,CACNC,MAAO4B,EAAKxB,kDAWPkB,OACXQ,EAAanC,KAAKoC,iBAGL,IAAbT,OAEGU,cAAcF,EAAY,OAAQ,MACjB,IAAbR,IAAmC,IAAjB3B,KAAK8B,cAI3BQ,aAAaH,yCAIRI,EAAMlC,EAAOmC,OACrBC,EAAU,MACVD,EAAM,KACJE,EAAO,IAAIC,KACfD,EAAKE,QAAQF,EAAKG,UAAmB,GAAPL,EAAY,GAAK,GAAK,KACpDC,EAAU,aAAeC,EAAKI,cAEhCC,SAASC,OAAST,EAAO,IAAMlC,EAAQoC,EAAU,+CAGvCF,WACNU,EAASV,EAAO,IAChBW,EAAKH,SAASC,OAAOG,MAAM,KACtBC,EAAI,EAAGA,EAAIF,EAAGG,OAAQD,IAAK,SAC9BE,EAAIJ,EAAGE,GACW,KAAfE,EAAEC,OAAO,IAAWD,EAAIA,EAAEE,UAAU,EAAGF,EAAED,WACvB,GAArBC,EAAEG,QAAQR,GAAc,OAAOK,EAAEE,UAAUP,EAAOI,OAAQC,EAAED,eAE3D,0CAGId,QACNF,cAAcE,EAAM,IAAK,kDAIvB,kEAGIjC,QAENwB,SAAU,MAEXK,EAAanC,KAAKoC,iBAClBY,EAAShD,KAAK0D,YAAYvB,GAE1Ba,GAAqB,SAAXA,SAEPrB,SAAW,uCArGX,+DAIA,CACL1B,QAAS,CACPmB,KAAMC,QAERM,SAAU,CACRP,KAAMC,OACNsC,SAAS,GAEX/B,OAAQ,CACNR,KAAMC,QAERQ,QAAS,CACPT,KAAMwC,SAER9B,QAAS,CACPV,KAAMwC,QACNC,UAAW,qDAyBR,CAAC,uCA4DZvC,OAAOC,eAAeC,OAAOE,EAAkBD,IAAKC"}