!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@polymer/polymer/polymer-element.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/iron-ajax/iron-ajax.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-element.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/iron-ajax/iron-ajax.js"],n):n((e=e||self).SitesListing={},e.polymerElement_js,e.polymer_dom_js)}(this,function(e,n,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function s(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function l(e,n,t){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var i=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=a(e)););return e}(e,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(t):o.value}})(e,n,t||e)}function d(){var e,n,t=(e=['\n    <style>\n      :host {\n        height: 100vh;\n        display: flex;\n        flex-direction: column;\n      }\n      iron-list {\n        flex: 1 1 auto;\n      }\n      #loading {\n        width: 100%;\n        z-index: 1000;\n        opacity: 0.8;\n        padding: 16px;\n        text-align: center;\n        align-content: center;\n        justify-content: center;\n        height: 100vh;\n        position: absolute;\n        background-color: rgba(250, 250, 250, 0.8);\n        transition: all linear 0.8s;\n        visibility: visible;\n      }\n      #loading div {\n        font-size: 32px;\n        font-weight: bold;\n        padding: 16px;\n      }\n      #loading[data-loading] {\n        background-color: rgba(0, 0, 0, 0);\n        opacity: 0;\n        visibility: hidden;\n      }\n      site-card {\n        padding: 16px;\n        font-size: 16px;\n      }\n      paper-button.site-card-wrapper {\n        margin: 0;\n        padding: 0;\n      }\n    </style>\n    <iron-ajax\n      id="loaddata"\n      auto=""\n      loading="{{__loading}}"\n      url="[[dataSource]]"\n      handle-as="json"\n      debounce-duration="250"\n      last-response="{{sitesResponse}}"\n    ></iron-ajax>\n    <div id="loading" data-loading$="[[!__loading]]">\n      <elmsln-loading size="large"></elmsln-loading>\n      <div>Loading..</div>\n    </div>\n    <iron-list id="list" items="[[sites]]" as="site" grid="">\n      <template>\n        <paper-button\n          on-focusin="_mouseEnter"\n          on-focusout="_mouseLeave"\n          data-site-id$="[[site.id]]"\n          class="site-card-wrapper"\n          on-tap="_siteClicked"\n        >\n          <site-card\n            data-site-id$="[[site.id]]"\n            size="[[size]]"\n            image="[[site.metadata.image]]"\n            icon="[[site.metadata.icon]]"\n            name="[[site.title]]"\n            title="[[site.description]]"\n            elevation="2"\n          ></site-card>\n        </paper-button>\n      </template>\n    </iron-list>'],(n=['\n    <style>\n      :host {\n        height: 100vh;\n        display: flex;\n        flex-direction: column;\n      }\n      iron-list {\n        flex: 1 1 auto;\n      }\n      #loading {\n        width: 100%;\n        z-index: 1000;\n        opacity: 0.8;\n        padding: 16px;\n        text-align: center;\n        align-content: center;\n        justify-content: center;\n        height: 100vh;\n        position: absolute;\n        background-color: rgba(250, 250, 250, 0.8);\n        transition: all linear 0.8s;\n        visibility: visible;\n      }\n      #loading div {\n        font-size: 32px;\n        font-weight: bold;\n        padding: 16px;\n      }\n      #loading[data-loading] {\n        background-color: rgba(0, 0, 0, 0);\n        opacity: 0;\n        visibility: hidden;\n      }\n      site-card {\n        padding: 16px;\n        font-size: 16px;\n      }\n      paper-button.site-card-wrapper {\n        margin: 0;\n        padding: 0;\n      }\n    </style>\n    <iron-ajax\n      id="loaddata"\n      auto=""\n      loading="{{__loading}}"\n      url="[[dataSource]]"\n      handle-as="json"\n      debounce-duration="250"\n      last-response="{{sitesResponse}}"\n    ></iron-ajax>\n    <div id="loading" data-loading\\$="[[!__loading]]">\n      <elmsln-loading size="large"></elmsln-loading>\n      <div>Loading..</div>\n    </div>\n    <iron-list id="list" items="[[sites]]" as="site" grid="">\n      <template>\n        <paper-button\n          on-focusin="_mouseEnter"\n          on-focusout="_mouseLeave"\n          data-site-id\\$="[[site.id]]"\n          class="site-card-wrapper"\n          on-tap="_siteClicked"\n        >\n          <site-card\n            data-site-id\\$="[[site.id]]"\n            size="[[size]]"\n            image="[[site.metadata.image]]"\n            icon="[[site.metadata.icon]]"\n            name="[[site.title]]"\n            title="[[site.description]]"\n            elevation="2"\n          ></site-card>\n        </paper-button>\n      </template>\n    </iron-list>'])||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return d=function(){return t},t}var c=function(e){function c(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,c),e=s(this,a(c).call(this)),import("@polymer/iron-list/iron-list.js"),import("@polymer/paper-button/paper-button.js"),import("@lrnwebcomponents/elmsln-loading/elmsln-loading.js"),import("@lrnwebcomponents/sites-listing/lib/site-card.js"),e}var p,u,f;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}(c,n.PolymerElement),p=c,f=[{key:"template",get:function(){return n.html(d())}},{key:"tag",get:function(){return"sites-listing"}},{key:"properties",get:function(){return{sitesResponse:{type:Object,notify:!0,observer:"_sitesResponseChanged"},sites:{type:Array,notify:!0},size:{type:String,value:"large"},dataSource:{type:String},loadLocation:{type:Boolean,value:!1}}}}],(u=[{key:"connectedCallback",value:function(){l(a(c.prototype),"connectedCallback",this).call(this),window.addEventListener("sites-listing-refresh-data",this.refreshData.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("sites-listing-refresh-data",this.refreshData.bind(this)),l(a(c.prototype),"disconnectedCallback",this).call(this)}},{key:"refreshData",value:function(e){this.shadowRoot.querySelector("#loaddata").generateRequest()}},{key:"_sitesResponseChanged",value:function(e,n){e&&"undefined"!==i(e.items)&&(this.set("sites",[]),this.set("sites",e.items),this.notifyPath("sites.*"))}},{key:"_siteClicked",value:function(e){var n=t.dom(e).localTarget.getAttribute("data-site-id"),o=this.sites.filter(function(e){return e.id===n});o.length>0&&(o=o.pop()),this.loadLocation&&"undefined"!==i(o.location)&&(window.location.href=o.location),this.dispatchEvent(new CustomEvent("sites-listing-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:o}))}},{key:"_mouseEnter",value:function(e){var n=t.dom(e.target).querySelectorAll("site-card")[0];n.__oldElevation=n.elevation,n.elevation+2>5?n.elevation=5:n.elevation+=2}},{key:"_mouseLeave",value:function(e){var n=t.dom(e.target).querySelectorAll("site-card")[0];n.elevation=n.__oldElevation}}])&&o(p.prototype,u),f&&o(p,f),c}();window.customElements.define(c.tag,c),e.SitesListing=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sites-listing.umd.js.map
