{"version":3,"file":"outline-designer.umd.js","sources":["lib/sortable-list.js","lib/pagemap.js","outline-designer.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { GestureEventListeners } from \"@polymer/polymer/lib/mixins/gesture-event-listeners.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport * as Gestures from \"@polymer/polymer/lib/utils/gestures.js\";\n/**\n * `outline-designer`\n * `tools to modify and visualize JSON Outline Schema for editing`\n *\n * @microcopy - language worth noting:\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass SortableList extends GestureEventListeners(PolymerElement) {\n  // render function\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n        }\n        #items ::slotted(*) {\n          user-drag: none;\n          user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          -webkit-user-drag: none;\n          -webkit-user-select: none;\n          -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n        }\n        #items ::slotted(.item--transform) {\n          left: 0;\n          margin: 0 !important;\n          position: fixed !important;\n          top: 0;\n          transition: transform 0.2s cubic-bezier(0.333, 0, 0, 1);\n          will-change: transform;\n          z-index: 1;\n        }\n        #items ::slotted(.item--pressed) {\n          transition: none !important;\n        }\n        #items ::slotted(.item--dragged) {\n          -webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          filter: brightness(1.1);\n          z-index: 2;\n        }\n      </style>\n      <div id=\"items\"><slot id=\"slot\"></slot></div>\n    `;\n  }\n  static get is() {\n    return \"sortable-list\";\n  }\n  static get properties() {\n    return {\n      /**\n       * This is a CSS selector string. If this is set, only items that\n       * match the CSS selector are sortable.\n       */\n      sortable: String,\n      /**\n       * The list of sortable items.\n       */\n      items: {\n        type: Array,\n        notify: true,\n        readOnly: true\n      },\n      /**\n       * Returns true when an item is being drag.\n       */\n      dragging: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true,\n        value: false\n      },\n      /**\n       * Disables the draggable if set to true.\n       */\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: false\n      }\n    };\n  }\n  constructor() {\n    super();\n    this._observer = null;\n    this._target = null;\n    this._targetRect = null;\n    this._rects = null;\n    this._onTrack = this._onTrack.bind(this);\n    this._onDragStart = this._onDragStart.bind(this);\n    this._onTransitionEnd = this._onTransitionEnd.bind(this);\n    this._onContextMenu = this._onContextMenu.bind(this);\n    this._onTouchMove = this._onTouchMove.bind(this);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    async.microTask.run(() => {\n      this._observeItems();\n      this._updateItems();\n      this._toggleListeners({ enable: true });\n    });\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._unobserveItems();\n    this._toggleListeners({ enable: false });\n  }\n  _toggleListeners({ enable }) {\n    const m = enable ? \"addEventListener\" : \"removeEventListener\";\n    this.$.items[m](\"dragstart\", this._onDragStart);\n    this.$.items[m](\"transitionend\", this._onTransitionEnd);\n    this.$.items[m](\"contextmenu\", this._onContextMenu);\n    this.$.items[m](\"touchmove\", this._onTouchMove);\n    if (enable) {\n      Gestures.addListener(this, \"track\", this._onTrack);\n    } else {\n      Gestures.removeListener(this, \"track\", this._onTrack);\n    }\n  }\n  _onTrack(event) {\n    switch (event.detail.state) {\n      case \"start\":\n        this._trackStart(event);\n        break;\n      case \"track\":\n        this._track(event);\n        break;\n      case \"end\":\n        this._trackEnd(event);\n        break;\n    }\n  }\n  _trackStart(event) {\n    if (this.disabled) {\n      return;\n    }\n    this._target = this._itemFromEvent(event);\n    if (!this._target) {\n      return;\n    }\n    event.stopPropagation();\n    this._rects = this._getItemsRects();\n    this._targetRect = this._rects[this.items.indexOf(this._target)];\n    this._target.classList.add(\"item--dragged\", \"item--pressed\");\n    if (\"vibrate\" in navigator) {\n      navigator.vibrate(30);\n    }\n    const rect = this.getBoundingClientRect();\n    this.style.height = rect.height + \"px\";\n    this.style.width = rect.width + \"px\";\n    this.items.forEach((item, idx) => {\n      const rect = this._rects[idx];\n      item.classList.add(\"item--transform\");\n      item.style.transition = \"none\";\n      item.__originalWidth = item.style.width;\n      item.__originalHeight = item.style.height;\n      item.style.width = rect.width + \"px\";\n      item.style.height = rect.height + \"px\";\n      this._translate3d(rect.left, rect.top, 1, item);\n      setTimeout(_ => {\n        item.style.transition = null;\n      }, 20);\n    });\n    this._setDragging(true);\n  }\n  _track(event) {\n    if (!this.dragging) {\n      return;\n    }\n    const left = this._targetRect.left + event.detail.dx;\n    const top = this._targetRect.top + event.detail.dy;\n    this._translate3d(left, top, 1, this._target);\n    const overItem = this._itemFromCoords(event.detail);\n    if (overItem && overItem !== this._target) {\n      const overItemIndex = this.items.indexOf(overItem);\n      const targetIndex = this.items.indexOf(this._target);\n      this._moveItemArray(this.items, targetIndex, overItemIndex);\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i] !== this._target) {\n          const rect = this._rects[i];\n          requestAnimationFrame(_ => {\n            this._translate3d(rect.left, rect.top, 1, this.items[i]);\n          });\n        }\n      }\n    }\n  }\n  // The track really ends\n  _trackEnd(event) {\n    if (!this.dragging) {\n      return;\n    }\n    const rect = this._rects[this.items.indexOf(this._target)];\n    this._target.classList.remove(\"item--pressed\");\n    this._setDragging(false);\n    this._translate3d(rect.left, rect.top, 1, this._target);\n  }\n  _onTransitionEnd() {\n    if (this.dragging || !this._target) {\n      return;\n    }\n    const fragment = document.createDocumentFragment();\n    this.items.forEach(item => {\n      item.style.transform = \"\";\n      item.style.width = item.__originalWidth;\n      item.style.height = item.__originalHeight;\n      item.classList.remove(\"item--transform\");\n      fragment.appendChild(item);\n    });\n    if (this.children[0]) {\n      this.insertBefore(fragment, this.children[0]);\n    } else {\n      this.appendChild(fragment);\n    }\n    this.style.height = \"\";\n    this._target.classList.remove(\"item--dragged\");\n    this._rects = null;\n    this._targetRect = null;\n    this._updateItems();\n    this.dispatchEvent(\n      new CustomEvent(\"sort-finish\", {\n        composed: true,\n        detail: {\n          target: this._target\n        }\n      })\n    );\n    this._target = null;\n  }\n  _onDragStart(event) {\n    event.preventDefault();\n  }\n  _onContextMenu(event) {\n    if (this.dragging) {\n      event.preventDefault();\n      this._trackEnd();\n    }\n  }\n  _onTouchMove(event) {\n    event.preventDefault();\n  }\n  _updateItems() {\n    if (this.dragging) {\n      return;\n    }\n    const items = this.$.slot.assignedNodes().filter(node => {\n      if (\n        node.nodeType === Node.ELEMENT_NODE &&\n        (!this.sortable || node.matches(this.sortable))\n      ) {\n        return true;\n      }\n    });\n    this._setItems(items);\n  }\n  _itemFromCoords({ x, y }) {\n    if (!this._rects) {\n      return;\n    }\n    let match = null;\n    this._rects.forEach((rect, i) => {\n      if (\n        x >= rect.left &&\n        x <= rect.left + rect.width &&\n        y >= rect.top &&\n        y <= rect.top + rect.height\n      ) {\n        match = this.items[i];\n      }\n    });\n    return match;\n  }\n  _itemFromEvent(event) {\n    const path = event.composedPath();\n    for (var i = 0; i < path.length; i++) {\n      if (this.items.indexOf(path[i]) > -1) {\n        return path[i];\n      }\n    }\n  }\n  _getItemsRects() {\n    return this.items.map(item => {\n      return item.getBoundingClientRect();\n    });\n  }\n  _observeItems() {\n    if (!this._observer) {\n      this._observer = new MutationObserver(_ => {\n        this._updateItems();\n      });\n      this._observer.observe(this, { childList: true });\n    }\n  }\n  _unobserveItems() {\n    if (this._observer) {\n      this._observer.disconnect();\n      this._observer = null;\n    }\n  }\n  /**\n   * Move an array item from one position to another.\n   * Source: http://stackoverflow.com/questions/5306680/move-an-array-element-from-one-array-position-to-another\n   */\n  _moveItemArray(array, oldIndex, newIndex) {\n    if (newIndex >= array.length) {\n      var k = newIndex - array.length;\n      while (k-- + 1) {\n        array.push(undefined);\n      }\n    }\n    array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n    return array;\n  }\n  _translate3d(x, y, z, el) {\n    el.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;\n  }\n}\nwindow.customElements.define(\"sortable-list\", SortableList);\nexport { SortableList };\n","const docEl = window.document.documentElement;\nconst doc = window.document;\nconst body = doc.querySelector(\"body\");\n\nconst Rect = (x, y, w, h) => {\n  return Object.assign(Object.create(Rect.prototype), {\n    x,\n    y,\n    w,\n    h\n  });\n};\n\nRect.prototype = {\n  constructor: Rect,\n\n  relativeTo(pos = { x: 0, y: 0 }) {\n    return Rect(this.x - pos.x, this.y - pos.y, this.w, this.h);\n  }\n};\n\nRect.ofDocument = () => {\n  return Rect(0, 0, docEl.scrollWidth, docEl.scrollHeight);\n};\n\nRect.ofWindow = () => {\n  return Rect(\n    window.pageXOffset,\n    window.pageYOffset,\n    docEl.clientWidth,\n    docEl.clientHeight\n  );\n};\n\nconst getOffset = el => {\n  const br = el.getBoundingClientRect();\n  return {\n    x: br.left + window.pageXOffset,\n    y: br.top + window.pageYOffset,\n    width: br.width,\n    height: br.height\n  };\n};\n\nRect.ofElement = el => {\n  const { x, y, width, height } = getOffset(el);\n  return Rect(x, y, width, height);\n};\n\nRect.ofViewport = el => {\n  const { x, y } = getOffset(el);\n  return Rect(\n    x + el.clientLeft,\n    y + el.clientTop,\n    el.clientWidth,\n    el.clientHeight\n  );\n};\n\nRect.ofContent = el => {\n  const { x, y } = getOffset(el);\n  return Rect(\n    x + el.clientLeft - el.scrollLeft,\n    y + el.clientTop - el.scrollTop,\n    el.scrollWidth,\n    el.scrollHeight\n  );\n};\n\nconst black = pc => {\n  return `rgba(0,0,0,${pc / 100})`;\n};\nconst defaults = {\n  viewport: null,\n  styles: {\n    \"header,footer,section,article\": black(8),\n    \"h1,a\": black(10),\n    \"h2,h3,h4\": black(8)\n  },\n  back: black(2),\n  view: black(5),\n  drag: black(10),\n  interval: null\n};\n\nconst _listener = (el, method, types, fn) =>\n  types.split(/\\s+/).forEach(type => el[method](type, fn));\nconst on = (el, types, fn) => _listener(el, \"addEventListener\", types, fn);\nconst off = (el, types, fn) => _listener(el, \"removeEventListener\", types, fn);\n\nconst pagemap = (canvas, options) => {\n  const settings = Object.assign({}, defaults, options);\n\n  const context = canvas.getContext(\"2d\");\n\n  const calcScale = (() => {\n    const width = canvas.clientWidth;\n    const height = canvas.clientHeight;\n    return (w, h) => Math.min(width / w, height / h);\n  })();\n\n  const resizeCanvas = (w, h) => {\n    canvas.width = w;\n    canvas.height = h;\n    canvas.style.width = `${w}px`;\n    canvas.style.height = `${h}px`;\n  };\n\n  const viewport = settings.viewport;\n  const find = sel => Array.from((viewport || doc).querySelectorAll(sel));\n\n  let drag = false;\n\n  let rootRect;\n  let viewRect;\n  let scale;\n  let dragRx;\n  let dragRy;\n\n  const drawRect = (rect, col) => {\n    if (!col) {\n      return;\n    }\n    context.beginPath();\n    context.rect(rect.x, rect.y, rect.w, rect.h);\n    context.fillStyle = col;\n    context.fill();\n  };\n\n  const applyStyles = styles => {\n    Object.keys(styles).forEach(sel => {\n      const col = styles[sel];\n      find(sel).forEach(el => {\n        drawRect(Rect.ofElement(el).relativeTo(rootRect), col);\n      });\n    });\n  };\n\n  const draw = () => {\n    rootRect = viewport ? Rect.ofContent(viewport) : Rect.ofDocument();\n    viewRect = viewport ? Rect.ofViewport(viewport) : Rect.ofWindow();\n    scale = calcScale(rootRect.w, rootRect.h);\n\n    resizeCanvas(rootRect.w * scale, rootRect.h * scale);\n\n    context.setTransform(1, 0, 0, 1, 0, 0);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.scale(scale, scale);\n\n    drawRect(rootRect.relativeTo(rootRect), settings.back);\n    applyStyles(settings.styles);\n    drawRect(\n      viewRect.relativeTo(rootRect),\n      drag ? settings.drag : settings.view\n    );\n  };\n\n  const onDrag = ev => {\n    ev.preventDefault();\n    const cr = Rect.ofViewport(canvas);\n    const x = (ev.pageX - cr.x) / scale - viewRect.w * dragRx;\n    const y = (ev.pageY - cr.y) / scale - viewRect.h * dragRy;\n\n    if (viewport) {\n      viewport.scrollLeft = x;\n      viewport.scrollTop = y;\n    } else {\n      window.scrollTo(x, y);\n    }\n    draw();\n  };\n\n  const onDragEnd = ev => {\n    drag = false;\n\n    canvas.style.cursor = \"pointer\";\n    body.style.cursor = \"auto\";\n    off(window, \"mousemove\", onDrag);\n    off(window, \"mouseup\", onDragEnd);\n    onDrag(ev);\n  };\n\n  const onDragStart = ev => {\n    drag = true;\n\n    const cr = Rect.ofViewport(canvas);\n    const vr = viewRect.relativeTo(rootRect);\n    dragRx = ((ev.pageX - cr.x) / scale - vr.x) / vr.w;\n    dragRy = ((ev.pageY - cr.y) / scale - vr.y) / vr.h;\n    if (dragRx < 0 || dragRx > 1 || dragRy < 0 || dragRy > 1) {\n      dragRx = 0.5;\n      dragRy = 0.5;\n    }\n\n    canvas.style.cursor = \"crosshair\";\n    body.style.cursor = \"crosshair\";\n    on(window, \"mousemove\", onDrag);\n    on(window, \"mouseup\", onDragEnd);\n    onDrag(ev);\n  };\n\n  const init = () => {\n    canvas.style.cursor = \"pointer\";\n    on(canvas, \"mousedown\", onDragStart);\n    on(viewport || window, \"load resize scroll\", draw);\n    if (settings.interval > 0) {\n      setInterval(() => draw(), settings.interval);\n    }\n    draw();\n  };\n\n  init();\n\n  return {\n    redraw: draw\n  };\n};\nexport { pagemap };\n","/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/social-icons.js\";\nimport \"@polymer/iron-icons/device-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/iron-image/iron-image.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-card/paper-card.js\";\nimport \"@polymer/iron-ajax/iron-ajax.js\";\nimport \"@polymer/iron-list/iron-list.js\";\nimport \"@polymer/iron-swipeable-container/iron-swipeable-container.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@polymer/paper-progress/paper-progress.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/app-layout/app-header/app-header.js\";\nimport \"@lrnwebcomponents/item-overlay-ops/item-overlay-ops.js\";\nimport \"@lrnwebcomponents/lrnsys-outline/lrnsys-outline.js\";\nimport \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"@lrnwebcomponents/simple-modal/simple-modal.js\";\nimport \"@lrnwebcomponents/editable-list/editable-list.js\";\nimport \"./lib/sortable-list.js\";\nimport { pagemap } from \"./lib/pagemap.js\";\n/**\n * `outline-designer`\n * `tools to modify and visualize JSON Outline Schema for editing`\n *\n * @microcopy - language worth noting:\n *  -\n * Feedback\n * color code lessons\nstep down the hierarchy\n\nmode vs resolution (3 levels)\n\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass OutlineDesigner extends PolymerElement {\n  \n  // render function\n  static get template() {\n    return html`\n<style>:host {\n  display: block;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\napp-toolbar {\n  background-color: var(--simple-colors-default-theme-light-blue-1, #4285f4);\n  color: var(--simple-colors-default-theme-grey-12, #222222);\n  margin: 20px 0;\n}\n\n#viewmode, #detailsmode {\n  transition: .3s all ease;\n  -webkit-transition: .3s all ease;\n  -moz-transition: .3s all ease;\n  -ms-transition: .3s all ease;\n  -o-transition: .3s all ease;\n}\n.rotate-90 {\n  transform: rotate(90deg);\n  -webkit-transform: rotate(90deg);\n  -moz-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  -o-transform: rotate(90deg);\n}\n\n.breadcrumb-arrow:first-child {\n    display: none;\n}\n.breadcrumb-arrow {\n  color: var(--breadcrumb-color1,rgb(67, 110, 144));\n  margin: -2px 6px 0 6px;\n}\n.breadcrumb {\n  text-decoration: none;\n  -webkit-tap-highlight-color: transparent;\n  background-color: transparent;\n  line-height: 34px;\n  font-size: 18px;\n  color: var(--breadcrumb-color1,rgb(67, 110, 144));\n  opacity: 0.8;\n}\n\npaper-progress {\n  display: block;\n  width: 100%;\n  --paper-progress-active-color: rgba(255, 255, 255, 0.5);\n  --paper-progress-container-color: transparent;\n}\n.card-wrapper {\n  padding: 16px;\n}\n\n#sort .card-wrapper {\n  background: #dddddd;\n  display: inline-block;\n  float: left;\n  margin: 16px;\n  vertical-align: top;\n}\n\npaper-card {\n  width: 250px;\n  height: 300px;\n  display: block;\n  visibility: visible;\n  opacity: 1;\n}\n\n#addbutton {\n  opacity: .6;\n  background-color: #dddddd;\n}\n.add-button {\n  width: 200px;\n  height: 200px;\n  margin: auto;\n  display: flex;\n}\n\npaper-card.expanded {\n  min-height: 300px;\n}\n\niron-list {\n  flex: 1 1 auto;\n}\n\n.low-detail,\n.mid-detail,\n.high-detail {\n  visibility: visible;\n  opacity: 1;\n  transition: .6s all ease;\n  -webkit-transition: .6s all ease;\n  -moz-transition: .6s all ease;\n  -ms-transition: .6s all ease;\n  -o-transition: .6s all ease;\n}\n\n:host([details-mode=\"low\"]) .mid-detail,\n:host([details-mode=\"low\"]) .high-detail {\n  visibility: hidden;\n  opacity: 0;\n}\n\n:host([details-mode=\"mid\"]) .high-detail {\n  visibility: hidden;\n  opacity: 0;\n}\n:host([details-mode=\"mid\"]) .mid-detail {\n  visibility: visible;\n  opacity: 1;\n}\n\npaper-card.card-low-detail {\n  width: 150px;\n  height: 150px;\n}\npaper-card.card-mid-detail {\n  width: 250px;\n  height: 250px;\n}\npaper-card.card-high-detail {\n  width: 250px;\n  height: 300px;\n}\n\n#minimaparea {\n  position: fixed;\n  top: 125px;\n  right: 0;\n  width: 100px;\n  height: 100%;\n  z-index: 100;\n  visibility: hidden;\n  opacity: 0;\n  transition: .3s all linear;\n  background-color: transparent;\n  -webkit-transition: .3s all linear;\n  -moz-transition: .3s all linear;\n  -ms-transition: .3s all linear;\n  -o-transition: .3s all linear;\n}\n#minimaparea.show-minimap {\n  background-color: white;\n  opacity: .5;\n  visibility: visible;\n}\n#minimaparea.show-minimap:hover {\n  opacity: .9;\n}\n\n.tf-tree{transition: .3s all ease;font-size:16px;overflow:auto}.tf-tree *{transition: .3s all ease;box-sizing:border-box;margin:0;padding:0}.tf-tree ul{display:inline-flex}.tf-tree li{align-items:center;display:flex;flex-direction:column;flex-wrap:wrap;padding:0 1em;position:relative}.tf-tree li ul{margin:2em 0}.tf-tree li li:before{border-top:.0625em solid #000;content:\"\";display:block;height:.0625em;left:-.03125em;position:absolute;top:-1.03125em;width:100%}.tf-tree li li:first-child:before{left:calc(50% - .03125em);max-width:calc(50% + .0625em)}.tf-tree li li:last-child:before{left:auto;max-width:calc(50% + .0625em);right:calc(50% - .03125em)}.tf-tree li li:only-child:before{display:none}.tf-tree li li:only-child>.tf-nc:before,.tf-tree li li:only-child>.tf-node-content:before{height:1.0625em;top:-1.0625em}.tf-tree .tf-nc,.tf-tree .tf-node-content{border:.0625em solid #000;display:inline-block;padding:.5em 1em;position:relative}.tf-tree .tf-nc:before,.tf-tree .tf-node-content:before{top:-1.03125em}.tf-tree .tf-nc:after,.tf-tree .tf-nc:before,.tf-tree .tf-node-content:after,.tf-tree .tf-node-content:before{border-left:.0625em solid #000;content:\"\";display:block;height:1em;left:calc(50% - .03125em);position:absolute;width:.0625em}.tf-tree .tf-nc:after,.tf-tree .tf-node-content:after{top:calc(100% + .03125em)}.tf-tree .tf-nc:only-child:after,.tf-tree .tf-node-content:only-child:after,.tf-tree>ul>li>.tf-nc:before,.tf-tree>ul>li>.tf-node-content:before{display:none}.tf-tree.tf-gap-sm li{padding:0 .6em}.tf-tree.tf-gap-sm li>.tf-nc:before,.tf-tree.tf-gap-sm li>.tf-node-content:before{height:.6em;top:-.6em}.tf-tree.tf-gap-sm li>.tf-nc:after,.tf-tree.tf-gap-sm li>.tf-node-content:after{height:.6em}.tf-tree.tf-gap-sm li ul{margin:1.2em 0}.tf-tree.tf-gap-sm li li:before{top:-.63125em}.tf-tree.tf-gap-sm li li:only-child>.tf-nc:before,.tf-tree.tf-gap-sm li li:only-child>.tf-node-content:before{height:.6625em;top:-.6625em}.tf-tree.tf-gap-lg li{padding:0 1.5em}.tf-tree.tf-gap-lg li>.tf-nc:before,.tf-tree.tf-gap-lg li>.tf-node-content:before{height:1.5em;top:-1.5em}.tf-tree.tf-gap-lg li>.tf-nc:after,.tf-tree.tf-gap-lg li>.tf-node-content:after{height:1.5em}.tf-tree.tf-gap-lg li ul{margin:3em 0}.tf-tree.tf-gap-lg li li:before{top:-1.53125em}.tf-tree.tf-gap-lg li li:only-child>.tf-nc:before,.tf-tree.tf-gap-lg li li:only-child>.tf-node-content:before{height:1.5625em;top:-1.5625em}.tf-tree li.tf-dotted-children .tf-nc:after,.tf-tree li.tf-dotted-children .tf-nc:before,.tf-tree li.tf-dotted-children .tf-node-content:after,.tf-tree li.tf-dotted-children .tf-node-content:before{border-left-style:dotted}.tf-tree li.tf-dotted-children li:before{border-top-style:dotted}.tf-tree li.tf-dotted-children>.tf-nc:before,.tf-tree li.tf-dotted-children>.tf-node-content:before{border-left-style:solid}.tf-tree li.tf-dashed-children .tf-nc:after,.tf-tree li.tf-dashed-children .tf-nc:before,.tf-tree li.tf-dashed-children .tf-node-content:after,.tf-tree li.tf-dashed-children .tf-node-content:before{border-left-style:dashed}.tf-tree li.tf-dashed-children li:before{border-top-style:dashed}.tf-tree li.tf-dashed-children>.tf-nc:before,.tf-tree li.tf-dashed-children>.tf-node-content:before{border-left-style:solid}\n.tf-label {\n  transition: .3s all ease;\n  cursor: pointer;\n}\n\n.node-high-detail li iron-image {\n  height: 50px;\n  position: static;\n}\n.node-high-detail li .tf-label {\n  z-index: 1;\n  position: relative;\n  font-size: 1.75em;\n  padding: 8px;\n  background-color: rgba(250,250,250,.8);\n}\n\n  .node-low-detail .tf-nc {\n    height: 32px;\n    width: 32px;\n    background-color: dodgerblue;\n    border-color: dodgerblue;\n    padding: 0;\n    border-radius: 50%;\n    overflow: hidden;\n    -webkit-border-radius: 50%;\n    -moz-border-radius: 50%;\n    -ms-border-radius: 50%;\n    -o-border-radius: 50%;\n  }\n\n  \n  .node-low-detail .tf-nc:before,\n  .node-low-detail .tf-nc:after {\n    border-left-color: dodgerblue;\n    border-left-width: 2px;\n  }\n  .node-low-detail li li:before {\n    border-top-color: dodgerblue;\n    border-top-width: 2px;\n  }</style>\n<style is=\"custom-style\" include=\"simple-colors\"></style>\n<iron-ajax\n  auto\n  url=\"[[outlineSchemaUrl]]\"\n  handle-as=\"json\"\n  on-response=\"handleResponse\"\n  last-response=\"{{manifest}}\"\n  loading=\"{{__loading}}\">\n</iron-ajax>\n<app-header reveals>\n  <app-toolbar>\n    View: [[viewModeLabel]]\n    <paper-icon-button on-tap=\"_toggleViewMode\" id=\"viewmode\" icon=\"[[viewModeIcon]]\"></paper-icon-button>\n    <paper-tooltip for=\"viewmode\">[[viewModeLabel]]</paper-tooltip>\n    Detail: [[detailsModeLabel]]\n    <paper-icon-button on-tap=\"_toggleDetailsMode\" id=\"detailsmode\" icon=\"[[detailsModeIcon]]\"></paper-icon-button>\n    <paper-tooltip for=\"detailsmode\">[[detailsModeLabel]]</paper-tooltip>\n    <div main-title class=\"flex layout breadcrumb_layout\">\n      <iron-icon class=\"breadcrumb-arrow\" icon=\"icons:chevron-right\"></iron-icon>\n      <a class=\"breadcrumb\" id=\"main\">[[manifest.title]]</a>\n\n          <iron-icon class=\"breadcrumb-arrow\" icon=\"icons:chevron-right\"></iron-icon>\n      <a class=\"breadcrumb\" id=\"second\">Lesson 2</a>\n\n          <iron-icon class=\"breadcrumb-arrow\" icon=\"icons:chevron-right\"></iron-icon>\n      <a class=\"breadcrumb\" id=\"third\">Math Basics</a>\n    </div>\n    <div>\n      <paper-icon-button on-tap=\"_toggleMiniMap\" id=\"minimap\" icon=\"device:gps-fixed\" title=\"Toggle outline mini map\"></paper-icon-button>\n      <paper-tooltip for=\"helpbutton\">Toggle mini-map</paper-tooltip>\n      <paper-icon-button id=\"helpbutton\" icon=\"icons:help\" title=\"help\"></paper-icon-button>\n      <paper-tooltip for=\"helpbutton\">Help</paper-tooltip>\n    </div>\n    <paper-progress value=\"10\" indeterminate bottom-item hidden$=\"[[!__loading]]\"></paper-progress>\n  </app-toolbar>\n</app-header>\n<iron-pages selected=\"[[selectedView]]\">\n  <section id=\"listpage\">\n    <iron-list id=\"ironlist\" items=\"[[manifest.items]]\" as=\"item\" grid>\n    <template>\n      <div class=\"card-wrapper\">\n      <item-overlay-ops fixed-height=\"140\" data-item-id$=\"[[item.id]]\" add=\"\" edit=\"\" remove=\"\" duplicate=\"\" move=\"\" edit-mode=\"\">\n        <paper-card class$=\"card-[[detailsMode]]-detail\" heading=\"[[item.title]]\" image=\"[[item.metadata.image]]\" elevation=\"2\" animated-shadow=\"false\">\n          <div class=\"card-content mid-detail\">[[item.description]]</div>\n          <div class=\"card-actions high-detail\">\n            <editable-list edit-mode=\"[[editMode]]\" items=\"[[manifest.items]]\">\n              <editable-list-item>[[item.title]]</editable-list-item>\n            </editable-list>\n            <ul>\n              <li>Page 1</li>\n              <iron-swipeable-container><li>Page 2</li></iron-swipeable-container>\n              <iron-swipeable-container><li>Page 3</li></iron-swipeable-container>\n            </ul>\n          </div>\n        </paper-card>\n      </item-overlay-ops>\n      </div>\n    </template>\n    </iron-list>\n  </section>\n  <section id=\"outlinepage\">\n    <lrnsys-outline id=\"outline\" items=\"{{manifest.items}}\" title=\"[[manifest.title]]\"></lrnsys-outline>\n  </section>\n  <section id=\"treepage\">\n    <div class$=\"node-[[detailsMode]]-detail tf-tree\">\n      <ul>\n        <template is=\"dom-repeat\" items=\"{{manifest.items}}\" as=\"item\" mutable-data>\n        <li>\n          <span class=\"tf-nc\">\n            <div class=\"tf-label\" id$=\"item-tip-[[item.id]]\">[[item.title]]</div>\n            <paper-tooltip for$=\"item-tip-[[item.id]]\">[[item.title]]</paper-tooltip>\n            <iron-image src=\"[[item.metadata.image]]\" preload sizing=\"cover\" class=\"high-detail\"></iron-image>\n          </span>\n        </li>\n        </template>\n      </ul>\n    </div>\n  </section>\n  <section id=\"sortpage\">\n    <sortable-list id=\"sort\" sortable=\".card-wrapper\" on-sort-finish=\"_onSortFinish\" dragging=\"{{dragging}}\">\n      <template is=\"dom-repeat\" items=\"{{manifest.items}}\" as=\"item\" mutable-data>\n        <div class=\"card-wrapper\">\n          <paper-card class$=\"card-[[detailsMode]]-detail\" data-item-id$=\"[[item.id]]\" heading=\"[[item.title]]\" image=\"[[item.metadata.image]]\" elevation=\"2\"\n            animated-shadow=\"false\">\n            <div class=\"card-content mid-detail\">[[item.description]]</div>\n            <div class=\"card-actions high-detail\"></div>\n          </paper-card>\n        </div>\n      </template>\n    </sortable-list>\n  </section>\n</iron-pages>\n<canvas id=\"minimaparea\"></canvas>\n<slot></slot>`;\n  }\n\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n  /**\n   * Which layout to the outline to display\n   */\n  \"viewMode\": {\n    \"name\": \"viewMode\",\n    \"type\": \"String\",\n    \"value\": \"cards\",\n    \"observer\": \"_viewModeChanged\"\n  },\n  /**\n   * Icon for the selected view mode\n   */\n  \"viewModeIcon\": {\n    \"name\": \"viewModeIcon\",\n    \"type\": \"String\"\n  },\n  /**\n   * Label for the selected view mode\n   */\n  \"viewModeLabel\": {\n    \"name\": \"viewModeLabel\",\n    \"type\": \"String\"\n  },\n  /**\n   * Which layout to the outline to display\n   */\n  \"detailsMode\": {\n    \"name\": \"detailsMode\",\n    \"type\": \"String\",\n    \"value\": \"mid\",\n    \"reflectToAttribute\": true,\n    \"observer\": \"_detailsModeChanged\"\n  },\n  /**\n   * Icon for the selected view mode\n   */\n  \"detailsModeIcon\": {\n    \"name\": \"detailsModeIcon\",\n    \"type\": \"String\"\n  },\n  /**\n   * Label for the selected view mode\n   */\n  \"detailsModeLabel\": {\n    \"name\": \"detailsModeLabel\",\n    \"type\": \"String\"\n  },\n  /**\n   * Data binding to show the selected view\n   */\n  \"selectedView\": {\n    \"name\": \"selectedView\",\n    \"type\": \"Number\"\n  },\n  /**\n   * Whether or not we are in an editing state\n   */\n  \"editMode\": {\n    \"name\": \"editMode\",\n    \"type\": \"Boolean\",\n    \"value\": false,\n    \"reflectToAttribute\": true,\n    \"observer\": \"_editModeChanged\"\n  },\n  /**\n   * Whether or to show the mini map\n   */\n  \"miniMap\": {\n    \"name\": \"miniMap\",\n    \"type\": \"Boolean\",\n    \"value\": true,\n    \"reflectToAttribute\": true,\n    \"observer\": \"_miniMapChanged\"\n  },\n  /**\n   * end point / JSON to load\n   */\n  \"outlineSchemaUrl\": {\n    \"name\": \"outlineSchemaUrl\",\n    \"type\": \"String\"\n  },\n  /**\n   * JSON outline schema manifest\n   */\n  \"manifest\": {\n    \"name\": \"manifest\",\n    \"type\": \"Object\",\n    \"notify\": true\n  },\n  /**\n   * Data in outline format\n   */\n  \"outlineData\": {\n    \"name\": \"outlineData\",\n    \"type\": \"Object\",\n    \"notify\": true\n  }\n}\n;\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   */\n  static get tag() {\n    return \"outline-designer\";\n  }\n  /**\n   * life cycle, element is afixed to the DOM\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    this.$.ironlist.addEventListener(\n      \"item-overlay-op-changed\",\n      this._overlayOpChanged.bind(this)\n    );\n    this.$.ironlist.addEventListener(\n      \"item-overlay-option-selected\",\n      this._overlayOpSelected.bind(this)\n    );\n    pagemap(this.$.minimaparea, {\n      viewport: null,\n      styles: {\n        \"ul,ol,li\": \"rgba(0, 0, 0, 0.08)\",\n        \"h1,h2,h3,h4,h5,h6,a\": \"rgba(0, 0, 0, 0.10)\",\n        \"lrnsys-outline-item\": \"rgba(0, 0, 0, 0.08)\",\n        \"p,section\": \"rgba(0, 0, 0, 0.02)\"\n      },\n      back: \"rgba(0, 0, 0, 0.02)\",\n      view: \"rgba(0, 0, 0, 0.05)\",\n      drag: \"rgba(0, 0, 0, 0.10)\",\n      interval: null\n    });\n  }\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.$.ironlist.removeEventListener(\n      \"item-overlay-op-changed\",\n      this._overlayOpChanged.bind(this)\n    );\n    this.$.ironlist.removeEventListener(\n      \"item-overlay-option-selected\",\n      this._overlayOpSelected.bind(this)\n    );\n  }\n  _toggleMiniMap(e) {\n    this.miniMap = !this.miniMap;\n  }\n\n  _miniMapChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      if (newValue) {\n        this.$.minimap.icon = \"device:gps-fixed\";\n        this.$.minimaparea.classList.add(\"show-minimap\");\n      } else {\n        this.$.minimap.icon = \"device:gps-off\";\n        this.$.minimaparea.classList.remove(\"show-minimap\");\n      }\n    }\n  }\n  /**\n   * toggle between view modes\n   */\n  _toggleViewMode(e) {\n    switch (this.viewMode) {\n      case \"cards\":\n        this.viewMode = \"outline\";\n        break;\n      case \"outline\":\n        this.outlineData = this.$.outline.getData();\n        this.viewMode = \"tree\";\n        break;\n      case \"tree\":\n        this.viewMode = \"drag\";\n        break;\n      case \"drag\":\n        this.viewMode = \"cards\";\n        break;\n    }\n  }\n  /**\n   * toggle between details mode\n   */\n  _toggleDetailsMode(e) {\n    switch (this.detailsMode) {\n      case \"low\":\n        this.detailsMode = \"mid\";\n        break;\n      case \"mid\":\n        this.detailsMode = \"high\";\n        break;\n      case \"high\":\n        this.detailsMode = \"low\";\n        break;\n    }\n  }\n  // Observer details mode for changes\n  _detailsModeChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      switch (newValue) {\n        case \"low\":\n          this.detailsModeIcon = \"icons:apps\";\n          this.detailsModeLabel = \"Low\";\n          break;\n        case \"mid\":\n          this.detailsModeIcon = \"icons:view-module\";\n          this.detailsModeLabel = \"Medium\";\n          break;\n        case \"high\":\n          this.detailsModeIcon = \"icons:view-carousel\";\n          this.detailsModeLabel = \"High\";\n          break;\n      }\n      // fire resize event if iron-list is visible\n      if (this.selectedView === 0) {\n        async.microTask.run(() => {\n          setTimeout(() => {\n            this.$.ironlist.fire(\"iron-resize\");\n            window.dispatchEvent(new Event(\"resize\"));\n          }, 50);\n        });\n      }\n    }\n  }\n  /**\n   * Sorting of items has finished, meaning drag drop complete\n   */\n  _onSortFinish(e) {\n    // @todo ensure items align with what's been drag and drop reordered\n    console.log(e.detail);\n  }\n  /**\n   * overlay operation changed\n   */\n  _overlayOpChanged(e) {\n    console.log(e.detail);\n    switch (e.detail.operation) {\n      case \"add\":\n        // @todo execute adding an item after here\n        console.log(\"add item\");\n        console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        break;\n      case \"edit\":\n        // @todo execute edit item here\n        console.log(\"edit item\");\n        console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        break;\n    }\n  }\n  /**\n   * Option selected in overlay by the user\n   */\n  _overlayOpSelected(e) {\n    console.log(e.detail);\n    switch (e.detail.operation) {\n      case \"move\":\n        if (e.detail.option === \"option1\") {\n          // @todo execute move left\n          console.log(\"move left\");\n        } else if (e.detail.option === \"option2\") {\n          // @todo execute move right\n          console.log(\"move right\");\n        }\n        console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        break;\n      case \"duplicate\":\n        if (e.detail.option === \"option1\") {\n          // @todo execute duplicate\n          console.log(\"duplicate\");\n          console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        }\n        break;\n      case \"remove\":\n        if (e.detail.option === \"option1\") {\n          // @todo execute delete\n          console.log(\"remove\");\n          console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        }\n        break;\n    }\n  }\n  // Observer layoutMode for changes\n  _viewModeChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      switch (newValue) {\n        case \"cards\":\n          this.$.viewmode.classList.add(\"rotate-90\");\n          this.selectedView = 0;\n          this.viewModeIcon = \"icons:view-module\";\n          this.viewModeLabel = \"Card view\";\n          async.microTask.run(() => {\n            setTimeout(() => {\n              this.$.ironlist.fire(\"iron-resize\");\n              window.dispatchEvent(new Event(\"resize\"));\n            }, 100);\n          });\n          break;\n        case \"outline\":\n          this.$.viewmode.classList.remove(\"rotate-90\");\n          this.selectedView = 1;\n          this.viewModeIcon = \"icons:view-list\";\n          this.viewModeLabel = \"Outline view\";\n          break;\n        case \"tree\":\n          this.$.viewmode.classList.add(\"rotate-90\");\n          this.selectedView = 2;\n          this.viewModeIcon = \"social:share\";\n          this.viewModeLabel = \"Tree view\";\n          break;\n        case \"drag\":\n          this.$.viewmode.classList.remove(\"rotate-90\");\n          this.selectedView = 3;\n          this.viewModeIcon = \"icons:touch-app\";\n          this.viewModeLabel = \"Draggable cards\";\n          break;\n      }\n    }\n  }\n  // Observer editMode for changes\n  _editModeChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      console.log(newValue);\n    }\n  }\n}\nwindow.customElements.define(\"outline-designer\", OutlineDesigner);\n\nexport { OutlineDesigner };\n"],"names":["SortableList","_observer","_target","_targetRect","_rects","_onTrack","_this","bind","_onDragStart","_onTransitionEnd","_onContextMenu","_onTouchMove","GestureEventListeners","PolymerElement","html","sortable","String","items","type","Array","notify","readOnly","dragging","Boolean","reflectToAttribute","value","disabled","async","run","_this2","_observeItems","_updateItems","_toggleListeners","enable","_unobserveItems","m","$","this","Gestures","event","detail","state","_trackStart","_track","_trackEnd","_itemFromEvent","stopPropagation","_getItemsRects","indexOf","classList","add","navigator","vibrate","rect","getBoundingClientRect","style","height","width","forEach","item","idx","_this3","transition","__originalWidth","__originalHeight","_translate3d","left","top","setTimeout","_","_setDragging","dx","dy","overItem","_itemFromCoords","overItemIndex","targetIndex","_moveItemArray","i","_this4","requestAnimationFrame","length","remove","fragment","document","createDocumentFragment","transform","appendChild","children","insertBefore","dispatchEvent","CustomEvent","composed","target","preventDefault","slot","assignedNodes","filter","node","nodeType","Node","ELEMENT_NODE","_this5","matches","_setItems","x","y","match","_this6","path","composedPath","map","MutationObserver","_this7","observe","childList","disconnect","array","oldIndex","newIndex","k","push","undefined","splice","z","el","window","customElements","define","docEl","documentElement","doc","body","querySelector","Rect","w","h","Object","assign","create","prototype","constructor","relativeTo","pos","ofDocument","scrollWidth","scrollHeight","ofWindow","pageXOffset","pageYOffset","clientWidth","clientHeight","getOffset","br","ofElement","ofViewport","clientLeft","clientTop","ofContent","scrollLeft","scrollTop","black","pc","defaults","viewport","styles","back","view","drag","interval","_listener","method","types","fn","split","on","off","pagemap","canvas","options","rootRect","viewRect","scale","dragRx","dragRy","settings","context","getContext","calcScale","Math","min","drawRect","col","beginPath","fillStyle","fill","applyStyles","keys","sel","from","querySelectorAll","find","draw","setTransform","clearRect","onDrag","ev","cr","pageX","pageY","scrollTo","onDragEnd","cursor","onDragStart","vr","setInterval","redraw","OutlineDesigner","ironlist","addEventListener","_overlayOpChanged","_overlayOpSelected","minimaparea","removeEventListener","e","miniMap","newValue","oldValue","_typeof","minimap","icon","viewMode","outlineData","outline","getData","detailsMode","detailsModeIcon","detailsModeLabel","selectedView","fire","Event","console","log","operation","element","getAttribute","option","viewmode","viewModeIcon","viewModeLabel"],"mappings":"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"}