!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js")):"function"==typeof define&&define.amd?define(["exports","lit-element/lit-element.js","@lrnwebcomponents/simple-colors/simple-colors.js"],t):t((n=n||self).CsvRender={},n.litElement_js,n.simpleColors_js)}(this,function(n,t,e){"use strict";function o(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),n}function a(n){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function i(n,t){return(i=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function l(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function c(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function s(){var n=c(["\n                    <td>","</td>\n                  "]);return s=function(){return n},n}function u(){var n=c(["\n              <tr>\n                ","\n              </tr>\n            "]);return u=function(){return n},n}function p(){var n=c(['\n                  <th scope="col">',"</th>\n                "]);return p=function(){return n},n}function d(){var n=c(["\n              <caption>\n                ","\n              </caption>\n            "]);return d=function(){return n},n}function b(){var n=c(['\n      <iron-ajax\n        auto\n        url="','"\n        handle-as="text"\n        debounce-duration="500"\n        @last-response-changed="','"\n        @response="','"\n      ></iron-ajax>\n      <hexagon-loader\n        id="loading"\n        accent-color="','"\n        loading\n        item-count="4"\n        size="small"\n      ></hexagon-loader>\n      <a href="','" id="download" tabindex="-1">\n        <paper-button\n          ><iron-icon icon="file-download"></iron-icon\n        ></paper-button>\n      </a>\n      <paper-tooltip for="download" animation-delay="200" offset="14"\n        >Download table data</paper-tooltip\n      >\n      <table class="table" summary="','">\n        ',"\n        <thead>\n          <tr>\n            ","\n          </tr>\n        </thead>\n        <tbody>\n          ","\n        </tbody>\n      </table>\n    "]);return b=function(){return n},n}function f(){var n=c(['\n        :host {\n          display: block;\n        }\n        .table {\n          width: 100%;\n          border: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-collapse: collapse;\n          white-space: nowrap;\n          font-size: 16px;\n          background-color: var(--simple-colors-default-theme-grey-1);\n        }\n        .table thead {\n          padding-bottom: 0.16px;\n          position: sticky;\n        }\n        .table caption {\n          background-color: var(--simple-colors-default-theme-accent-1);\n          font-weight: bold;\n          padding: 8px;\n          border: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-bottom: none;\n        }\n        :host(:not([accent-color])) .table caption,\n        :host([accent-color="grey"]) .table caption {\n          background-color: var(--simple-colors-default-theme-accent-2);\n        }\n        .table tbody tr {\n          position: relative;\n          height: 48px;\n          -webkit-transition-duration: 0.28s;\n          transition-duration: 0.28s;\n          -webkit-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n          -webkit-transition-property: background-color;\n          transition-property: background-color;\n        }\n        .table tbody tr:hover {\n          background-color: var(--simple-colors-default-theme-accent-1);\n        }\n        :host(:not([accent-color])) .table tbody tr:hover,\n        :host([accent-color="grey"]) .table tbody tr:hover {\n          background-color: var(--simple-colors-default-theme-accent-2);\n        }\n        .table td,\n        .table thead th,\n        .table th {\n          padding: 0 1.125em;\n          text-align: left;\n        }\n        .table td {\n          border-top: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-bottom: 1px solid var(--simple-colors-default-theme-accent-6);\n        }\n        .table th {\n          position: relative;\n          vertical-align: bottom;\n          text-overflow: ellipsis;\n          font-size: 16px;\n          font-weight: bold;\n          line-height: 24px;\n          letter-spacing: 0;\n          color: rgba(0, 0, 0, 0.54);\n          height: 48px;\n          padding-bottom: 8px;\n          box-sizing: border-box;\n        }\n        #loading {\n          position: absolute;\n        }\n        #download paper-button {\n          color: var(--simple-colors-default-theme-accent-6);\n          border-radius: 36px;\n          width: 36px;\n          height: 36px;\n          min-width: unset;\n          padding: 0;\n          margin: 0;\n          display: inline-flex;\n        }\n        iron-icon {\n          display: inline-flex;\n          margin: 0;\n          padding: 0;\n        }\n        #download paper-button:hover,\n        #download paper-button:focus,\n        #download paper-button:active {\n          color: var(--simple-colors-default-theme-accent-8);\n          outline: 2px solid var(--simple-colors-default-theme-accent-6);\n        }\n      ']);return f=function(){return n},n}var h=function(n){function o(){var n;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=l(this,a(o).call(this))).table=[],n.tableHeadings=[],n.tableData="",import("@lrnwebcomponents/hexagon-loader/hexagon-loader.js"),import("@polymer/iron-ajax/iron-ajax.js"),import("@polymer/iron-icons/iron-icons.js"),import("@polymer/iron-icon/iron-icon.js"),import("@polymer/paper-button/paper-button.js"),import("@polymer/paper-tooltip/paper-tooltip.js"),n}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&i(n,t)}(o,e.SimpleColors),r(o,null,[{key:"styles",get:function(){return[t.css(f())]}}]),r(o,[{key:"updated",value:function(n){var t=this;n.forEach(function(n,e){"color"==e&&t._getAccentColor(t[e],n)})}},{key:"render",value:function(){var n=this;return t.html(b(),this.dataSource,this.tableDataChanged,this.handleResponse,this.accentColor,this.dataSource,this.summary,this.caption?t.html(d(),this.caption):"",this.tableHeadings.map(function(e){return t.html(p(),n.heading)}),this.table.map(function(n){return t.html(u(),n.map(function(n){return t.html(s(),n)}))}))}},{key:"tableDataChanged",value:function(n){this.tableData=n.detail.value}},{key:"handleResponse",value:function(n){this.table=this.CSVtoArray(this.tableData),this.tableHeadings=this.table.shift(),this.shadowRoot.querySelector("#loading").loading=!1}},{key:"CSVtoArray",value:function(n){var t,e="",o=[""],r=[o],a=0,i=0,l=!0;for(t in n)'"'===(t=n[t])?(l&&t===e&&(o[a]+=t),l=!l):","===t&&l?t=o[++a]="":"\n"===t&&l?("\r"===e&&(o[a]=o[a].slice(0,-1)),o=r[++i]=[t=""],a=0):o[a]+=t,e=t;return r}},{key:"_getAccentColor",value:function(n){n=n.replace("-text",""),this.accentColor&&"grey"!==this.accentColor||!this.colors[n]||(this.accentColor=n)}}],[{key:"tag",get:function(){return"csv-render"}},{key:"properties",get:function(){return{dataSource:{type:String,attribute:"data-source"},caption:{type:String},summary:{type:String},table:{type:Array},tableHeadings:{type:Array},tableData:{type:String,attribute:"table-data"},color:{type:String}}}}]),o}();window.customElements.define(h.tag,h),n.CsvRender=h,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=csv-render.umd.js.map
