{"version":3,"file":"lrn-calendar.umd.js","sources":["lib/lrn-calendar-date.js","lrn-calendar.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@lrnwebcomponents/materializecss-styles/lib/colors.js\";\nimport \"@polymer/paper-card/paper-card.js\";\nimport \"@lrnwebcomponents/lrnsys-layout/lib/lrnsys-drawer.js\";\nimport \"@polymer/iron-ajax/iron-ajax.js\";\n/**\n * `lrn-calendar-date`\n * `A LRN element`\n *\n * @demo demo/index.html\n *\n */\nPolymer({\n  _template: html`\n    <style include=\"materializecss-styles-colors\">\n      :host {\n        display: block;\n      }\n      ::-webkit-scrollbar {\n        width: 0px;  /* remove scrollbar space */\n        background: transparent;  /* optional: just make scrollbar invisible */\n      }\n\n      .month {\n        width: 100%;\n        height: 20vh;\n        vertical-align: top;\n        overflow: scroll;\n      }\n      .week{\n        width: 100%;\n        height: 40vh;\n        vertical-align: top;\n        overflow: scroll;\n      }\n      .card-content{\n        position: relative;\n        bottom: 10px;\n        white-space: nowrap;\n        font-size: 12px;\n        padding: 0px 5px;\n        line-height: 7px;\n      }\n      .label{\n        width: 100%\n      }\n    </style>\n  \n      <div id=\"test\">\n        <div>\n          <template is=\"dom-if\" if=\"[[firstWeek]]\">\n            <paper-card class=\"label\">\n              <h3>[[getWeek(date)]]</h3>\n            </paper-card>\n          </template>\n        </div>\n        <paper-card class$=\"[[view]]\" id=\"dateHeader\">\n          <h5>[[getMonth(date)]]</h5>\n          <template is=\"dom-repeat\" items=\"{{events}}\">\n              <div class=\"card-content\">\n                <lrnsys-drawer text=\"[[timeString(item.event.startDate._time.hour, item.event.startDate._time.minute, item.event.endDate._time.hour,item.event.endDate._time.minute)]] {{item.event.summary}}\" header=\"[[getDateString(date)]]\" align=\"left\" heading-class=\"orange lighten-3 blue-text text-darken-4\" style$=\"[[computeStyle(item)]];overflow:auto;\">\n                [[displayActivity(item)]] <br/><br/>[[displayStart(item)]]<br><br>[[displayEnd(item)]]<br><br>[[displayDuration(item)]]<br><br>[[displayDescription(item)]]<br><br>[[displayLocation(item)]]\n                </lrnsys-drawer>\n              </div>\n          </template>\n        </paper-card>\n      </div>\n`,\n\n  is: \"lrn-calendar-date\",\n\n  properties: {\n    title: {\n      type: String,\n      value: \"lrn-calendar-date\"\n    },\n    name: {\n      type: String\n    },\n    date: {\n      type: Date\n    },\n    loadeddate: {\n      type: Boolean\n    },\n    firstWeek: {\n      type: Boolean\n    },\n    view: {\n      type: String\n    },\n    valid: {\n      type: Boolean,\n      value: false\n    }\n  },\n\n  /*\n  * Displays the month in the heading\n  */\n\n  getMonth: function(date) {\n    var monthInt = date.getMonth();\n    var day = date.getDate();\n    var monthsArray = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\"\n    ];\n    if (day == 1) {\n      monthstring = monthsArray[monthInt] + \" \" + day;\n    } else {\n      monthstring = day;\n    }\n\n    return monthstring;\n  },\n\n  /*\n  * Displays the weekday for in the column for the first week\n  */\n  getWeek: function(date) {\n    var weekdays = date.getDay();\n    var weekArray = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    return weekArray[weekdays];\n  },\n\n  /*\n  * Creates the string that displays the time of the event\n  */\n  timeString: function(startHour, startMinute, endHour, endMinute) {\n    var amPM = startHour > 11 ? \"pm\" : \"am\";\n    if (startHour > 12) {\n      startHour -= 12;\n    } else if (startHour == 0) {\n      //If the start time and end time is 12AM\n      if (startMinute == 0 && endHour == 0 && endMinute == 0) {\n        var allDayText = \"\";\n        return allDayText;\n      } else {\n        startHour = \"12\";\n      }\n    }\n    if (startMinute < 10) {\n      startMinute = \"0\" + startMinute;\n    }\n    if (startMinute == 0) {\n      return startHour + amPM;\n    }\n    return startHour + \":\" + startMinute + amPM;\n  },\n\n  /*\n  * If an event occurs the whole day the background color is yellow\n  */\n  computeStyle: function(item) {\n    if (item.event.startDate._time.hour == 0)\n      var s = \"background-color:\" + \" yellow\";\n    else var s = \"background-color:\" + \" clear\";\n    return s;\n  },\n\n  /*\n  * When click for more info, this gives the full date of the event\n  */\n  getDateString: function(date) {\n    var monthInt = date.getMonth();\n    var day = date.getDate();\n    var monthsArray = [\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"August\",\n      \"September\",\n      \"October\",\n      \"November\",\n      \"December\"\n    ];\n    monthstring =\n      monthsArray[monthInt] + \" \" + date.getDate() + \" \" + date.getFullYear();\n\n    return monthstring;\n  },\n\n  /*\n  * Displayes the name of the activity in the more info slideout\n  */\n  displayActivity: function(e) {\n    var activity = e.event.summary;\n    return \"Activity: \" + activity;\n  },\n\n  /*\n  * Displays the start time in the more info slideout\n  */\n  displayStart: function(e) {\n    var startTime = this.timeString(\n      e.event.startDate._time.hour,\n      e.event.startDate._time.minute\n    );\n    var endTime = this.timeString(\n      e.event.endDate._time.hour,\n      e.event.endDate._time.minute\n    );\n    /*if(startTime == \"12am\" && endTime == \"12\"){\n      return \"\";\n    }*/\n    return \"Start Time: \" + startTime;\n  },\n\n  /*\n  * Displays the end time in the more info slideout\n  */\n  displayEnd: function(e) {\n    var endTime = this.timeString(\n      e.event.endDate._time.hour,\n      e.event.endDate._time.minute\n    );\n    return \"End Time: \" + endTime;\n  },\n\n  /*\n  * Displays the duration in the more info slideout\n  */\n  displayDuration: function(e) {\n    var duration = e.event.duration;\n    var days = duration.days;\n    var hours = duration.hours;\n    var minutes = duration.minutes;\n    var weeks = duration.weeks;\n    if (hours == 0 && minutes == 0 && days == 1) {\n      return \"Duration: All Day\";\n    }\n    if (days == 0) {\n      if (hours == 0) {\n        if (minutes == 0) {\n          return \"Duration: \";\n        } else {\n          return \"Duration: \" + minutes + \"min\";\n        }\n      } else {\n        if (minutes == 0) {\n          return \"Duration: \" + hours + \"H \";\n        } else {\n          return \"Duration: \" + hours + \"H \" + minutes + \"min \";\n        }\n      }\n    } else {\n      if (hours == 0 && minutes == 0) {\n        return \"Duration: \" + days + \"Days \";\n      } else if (hours > 0 && minutes == 0) {\n        return \"Duration: \" + days + \"Days \" + hours + \"H \";\n      } else {\n        return \"Duration: \" + days + \"Days \" + hours + \"H \" + minutes + \"min \";\n      }\n    }\n  },\n\n  /*\n  * Displays the description in the more info slideout\n  */\n  displayDescription: function(e) {\n    var description = e.event.description;\n    if (!description) {\n      return \"Description: \";\n    }\n    return \"Description: \";\n  },\n\n  /*\n  * Displays the location in the more info slideout\n  */\n  displayLocation: function(e) {\n    var location = e.event.location;\n    location = String(location);\n    if (location == null || location == \"null\") {\n      return \"Location: \";\n    }\n    return \"Location: \" + location;\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport { pathFromUrl } from \"@polymer/polymer/lib/utils/resolve-url.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/paper-card/paper-card.js\";\nimport \"@polymer/iron-ajax/iron-ajax.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@lrnwebcomponents/materializecss-styles/lib/colors.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/lrnsys-layout/lrnsys-layout.js\";\nimport \"@lrnwebcomponents/lrnsys-layout/lib/lrnsys-drawer.js\";\nimport \"@lrnwebcomponents/lrnsys-layout/lib/lrnsys-dialog.js\";\nimport \"@lrnwebcomponents/lrnsys-layout/lib/lrnsys-collapselist.js\";\nimport \"@lrnwebcomponents/lrnsys-layout/lib/lrnsys-collapselist-item.js\";\nimport \"@lrnwebcomponents/es-global-bridge/es-global-bridge.js\";\nimport \"./lib/lrn-calendar-date.js\";\n/**\n`lrn-calendar`\nA LRN element\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      lrn-calendar-date {\n        display: inline-table;\n        top: 0px;\n      }\n      paper-card {\n        width: 14%;\n        height: 20px;\n        display: inline-table;\n        padding: 0;\n        margin: 0;\n      }\n      .calendar {\n        color: var(--my-toolbar-title-color);\n      }\n      .header{\n        padding-bottom: 15px;\n      }\n    </style>\n\n    <div class=\"calendar\">\n      <div class=\"header\">\n        <div style=\"float: left\">\n          <paper-button raised type=\"button\" on-tap=\"monthView\">Month</paper-button>\n          <paper-button raised type=\"button\" on-tap=\"weekView\">Week</paper-button>\n        </div>\n        <div style=\"float: right\">\n          <paper-button raised type=\"button\" on-tap=\"showDate\">Today</paper-button>\n          <paper-button on-tap=\"showPrev\"><iron-icon icon=\"arrow-back\"></iron-icon></paper-button>\n          <paper-button on-tap=\"showNext\"><iron-icon icon=\"arrow-forward\"></iron-icon></paper-button>\n        </div>\n        <div style=\"margin: 0 auto; width: 200px; text-align: center\">\n          <h2>[[getDisplayDate(date)]]</h2>\n        </div>\n      </div>\n\n      <div class=\"calendarView\" id=\"calView\"></div>\n    </div>\n`,\n\n  is: \"lrn-calendar\",\n\n  behaviors: [HAXBehaviors.PropertiesBehaviors],\n\n  properties: {\n    /**\n     * An array of events for display\n     */\n    listOfEvents: {\n      type: Array,\n      value: []\n    },\n    /**\n     * Date to start from\n     */\n    dateString: {\n      type: String,\n      observer: \"_dateStringChanged\"\n    },\n    /**\n     * Date to start from\n     */\n    date: {\n      type: Date,\n      value: new Date(),\n      observer: \"_dateChanged\"\n    },\n    /**\n     * Type of display, possible values, month, day, week\n     */\n    view: {\n      type: String,\n      value: \"month\",\n      observer: \"_viewTypeChanged\"\n    },\n    /**\n     * ical file to reference to pull in dates.\n     */\n    file: {\n      type: String,\n      reflectToAttribute: true,\n      observer: \"_fileChanged\"\n    }\n  },\n\n  /**\n   * Notice the file has changed and attempt to rebind.\n   */\n  _fileChanged: function(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined && this.__icalLoaded) {\n      this.loadFile();\n      this.getDateInfo();\n      this.createCalendar();\n    }\n  },\n\n  /**\n   * Notice the file has changed and attempt to rebind.\n   */\n  _viewTypeChanged: function(newValue, oldValue) {\n    if (\n      typeof newValue !== typeof undefined &&\n      typeof this.file !== typeof undefined &&\n      this.__icalLoaded\n    ) {\n      this.getDateInfo();\n      this.createCalendar();\n    }\n  },\n\n  /**\n   * Notice the file has changed and attempt to rebind.\n   */\n  _dateChanged: function(newValue, oldValue) {\n    if (\n      typeof newValue !== typeof undefined &&\n      typeof this.file !== typeof undefined &&\n      this.__icalLoaded\n    ) {\n      this.getDateInfo();\n      this.createCalendar();\n    }\n  },\n\n  /**\n   * Notice the String of the date has changed and reset the actual date to it\n   */\n  _dateStringChanged: function(newValue, oldValue) {\n    if (\n      typeof newValue !== typeof undefined &&\n      newValue != \"\" &&\n      this.__icalLoaded\n    ) {\n      this.date = new Date(newValue);\n    }\n  },\n  /**\n   * created life cycle\n   */\n  created: function() {\n    const name = \"ical\";\n    const basePath = pathFromUrl(import.meta.url);\n    const location = `${basePath}lib/ical.js/build/ical.js`;\n    window.addEventListener(\n      `es-bridge-${name}-loaded`,\n      this._icalLoaded.bind(this)\n    );\n    window.ESGlobalBridge.requestAvailability();\n    window.ESGlobalBridge.instance.load(name, location);\n  },\n  /**\n   * ical loaded\n   */\n  _icalLoaded: function() {\n    this.__icalLoaded = true;\n    if (typeof this.file !== typeof undefined) {\n      this.loadFile();\n    }\n  },\n  /**\n   * Attached lifecycle.\n   */\n  attached: function() {\n    // Establish hax properties if they exist\n    //this._initializeReader();\n    let props = {\n      canScale: false,\n      canPosition: false,\n      canEditSource: false,\n      gizmo: {\n        title: \"Calendar\",\n        description: \"Present dates.\",\n        icon: \"icons:today\",\n        color: \"grey\",\n        groups: [\"Date\"],\n        handles: [\n          {\n            type: \"ical\",\n            source: \"file\",\n            date: \"date\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"file\",\n            title: \"iCal feed\",\n            description: \"Calendar feed to display\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"file\",\n            title: \"iCal feed\",\n            description: \"Calendar feed to display\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            required: true,\n            validationType: \"url\"\n          },\n          {\n            property: \"view\",\n            title: \"View calendar in week or month format\",\n            description: \"week or month view\",\n            inputMethod: \"select\",\n            options: {\n              week: \"Week\",\n              month: \"Month\"\n            }\n          },\n          {\n            property: \"dateString\",\n            title: \"Date: yyyy/mm/dd\",\n            description: \"Date to display calendar\",\n            inputMethod: \"datepicker\"\n          }\n        ],\n        advanced: []\n      }\n    };\n    this.setHaxProperties(props);\n  },\n\n  /**\n   * Load the ical file.\n   */\n  loadFile: function() {\n    this.startIndex = 0;\n    this.calendarText = this.readTextFile(this.file);\n    this.listOfEvents = this.getEvents(this.date, this.calendarText);\n    this.listOfEvents = this.sortByTime(this.listOfEvents);\n  },\n\n  /*\n  * Is called to show the previous month/week depending on option selected\n  */\n  showPrev: function() {\n    var current;\n    this.startIndex = 0;\n    if (this.view == \"month\") {\n      if (this.date.getMonth() == 2) {\n        if (this.date.getDate() > 28) {\n          current = new Date(\n            this.date.getFullYear(),\n            this.date.getMonth() - 1,\n            28\n          );\n        } else {\n          current = new Date(\n            this.date.getFullYear(),\n            this.date.getMonth() - 1,\n            this.date.getDate()\n          );\n        }\n      } else {\n        current = new Date(\n          this.date.getFullYear(),\n          this.date.getMonth() - 1,\n          this.date.getDate()\n        );\n      }\n      this.date = current;\n    } else {\n      var current = new Date(\n        this.date.getFullYear(),\n        this.date.getMonth(),\n        this.date.getDate() - 7\n      );\n      this.date = current;\n    }\n\n    this.startMonth = this.date.getMonth() + 1;\n\n    this.getDateInfo();\n    this.createCalendar();\n  },\n\n  /*\n  * Is called to show the next month/week\n  */\n  showNext: function() {\n    var current;\n    if (this.view == \"month\") {\n      if (this.date.getMonth() == 11) {\n        current = new Date(this.date.getFullYear() + 1, 0, this.date.getDate());\n      } else if (this.date.getMonth() == 0) {\n        if (this.date.getDate() > 28) {\n          current = new Date(\n            this.date.getFullYear(),\n            this.date.getMonth() + 1,\n            28\n          );\n        } else {\n          current = new Date(\n            this.date.getFullYear(),\n            this.date.getMonth() + 1,\n            this.date.getDate()\n          );\n        }\n      } else {\n        current = new Date(\n          this.date.getFullYear(),\n          this.date.getMonth() + 1,\n          this.date.getDate()\n        );\n      }\n      this.date = current;\n    } else {\n      var current = new Date(\n        this.date.getFullYear(),\n        this.date.getMonth(),\n        this.date.getDate() + 7\n      );\n      this.date = current;\n    }\n\n    this.getDateInfo();\n    this.createCalendar();\n  },\n\n  /**\n   * Is called to show the next month/week\n   */\n  showDate: function() {\n    this.startIndex = 0;\n    this.date = new Date();\n    this.getDateInfo();\n    this.createCalendar();\n  },\n\n  //Set the view to month\n  monthView: function() {\n    this.view = \"month\";\n    this.startIndex = 0;\n    this.createCalendar();\n  },\n\n  //Set the view to weekly\n  weekView: function() {\n    this.view = \"week\";\n    this.startIndex = 0;\n    this.createCalendar();\n  },\n\n  readTextFile: function(file) {\n    this.fileNotFound = false;\n    var rawFile = new XMLHttpRequest();\n    var allText = \"\";\n    rawFile.open(\"GET\", file, false);\n    rawFile.onreadystatechange = function() {\n      if (rawFile.readyState === 4) {\n        if (rawFile.status === 200 || rawFile.status == 0) {\n          allText = rawFile.responseText;\n        } else {\n          allText = \"Not Found\";\n        }\n      }\n    };\n\n    rawFile.send(null);\n    this.calendarText = allText;\n    return allText;\n  },\n\n  /*\n  * Determines the view and then calls lrn-calendar-date to \n  * create the individual date blocks\n  * Does the math required to get all the days correct. Ex: Oct 31 -> Nov 1\n  */\n  createCalendar: function() {\n    if (this.view != \"month\") {\n      if (this.view != \"week\") {\n        this.view = \"month\";\n      }\n    }\n    if (!this.date.getFullYear()) {\n      this.date = new Date();\n    }\n\n    this.getDateInfo();\n\n    this.totalDays = this.numweeks * 7;\n    this.calendarText = this.readTextFile(this.file);\n    this.calendarView = this.$.calView;\n\n    var days = 1;\n    var pastDate = 0;\n\n    //Remove past calendar blocks ************************************\n    var elem = dom(this.$.calView).node;\n    var elemChildren = elem.childNodes;\n\n    while (elemChildren[1]) {\n      elem.removeChild(elem.childNodes[1]);\n    }\n    //*******************************************************************\n\n    //Setup for calendar*******************************************************************\n\n    var initialDayofWeek = this.currentDayofWeek;\n\n    //Determine how many days until the end of the week\n    if (this.view == \"week\") {\n      var dayCount = 0;\n      while (this.currentDayofWeek + dayCount < 6) {\n        dayCount = dayCount + 1;\n      }\n      this.totalDays = dayCount;\n    }\n    //Month view Setup\n    if (this.view == \"month\") {\n      if (\n        this.currentMonth == 1 ||\n        this.currentMonth == 3 ||\n        this.currentMonth == 5 ||\n        this.currentMonth == 7 ||\n        this.currentMonth == 8 ||\n        this.currentMonth == 10 ||\n        this.currentMonth == 12\n      ) {\n        this.totalDays = 31;\n        this.totalDays = this.totalDays - this.startDay + 1;\n      } else if (\n        this.currentMonth == 4 ||\n        this.currentMonth == 6 ||\n        this.currentMonth == 9 ||\n        this.currentMonth == 11\n      ) {\n        this.totalDays = 30;\n        this.totalDays = this.totalDays - this.startDay + 1;\n      } else {\n        this.totalDays = 29;\n        this.totalDays = this.totalDays - this.startDay;\n      }\n    }\n    //Sets up days before the actual day to display on calendar\n    this.newDate = new Date(\n      this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n    );\n    if (this.view == \"month\") {\n      while (this.currentDate != 1) {\n        days = days - 1;\n\n        if (this.currentMonth == 1 && this.currentDate == 1) {\n          this.currentYear = this.currentYear - 1;\n          this.currentMonth = 12;\n          this.currentDate = 31;\n          this.newDate = new Date(\n            this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n          );\n        } else {\n          this.currentDate = this.currentDate - 1;\n\n          this.newDate = new Date(\n            this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n          );\n\n          if (this.newDate.getDate() != this.currentDate) {\n            //31 day months\n            if (\n              this.currentDate == 0 &&\n              (this.currentMonth == 2 ||\n                this.currentMonth == 4 ||\n                this.currentMonth == 6 ||\n                this.currentMonth == 8 ||\n                this.currentMonth == 9 ||\n                this.currentMonth == 11 ||\n                this.currentMonth == 1)\n            ) {\n              this.newDate = new Date(\n                this.currentYear + \"/\" + (this.currentMonth - 1) + \"/\" + 31\n              );\n              this.currentDate = 31;\n            }\n            //30 day months\n            if (\n              this.currentDate == 0 &&\n              (this.currentMonth == 5 ||\n                this.currentMonth == 7 ||\n                this.currentMonth == 10 ||\n                this.currentMonth == 12)\n            ) {\n              this.newDate = new Date(\n                this.currentYear + \"/\" + (this.currentMonth - 1) + \"/\" + 30\n              );\n              this.currentDate = 30;\n            }\n            //February\n            if (this.currentDate == 0 && this.currentMonth == 3) {\n              this.newDate = new Date(this.currentYear + \"/\" + 2 + \"/\" + 29);\n              this.currentDate = 29;\n\n              if (this.newDate.getMonth() == 2) {\n                this.newDate = new Date(this.currentYear + \"/\" + 2 + \"/\" + 28);\n                this.currentDate = 28;\n              }\n            }\n            this.currentMonth = this.currentMonth - 1;\n          }\n        }\n        if (this.currentDayofWeek == 0 || initialDayofWeek == 0) {\n          this.currentDayofWeek = 7;\n          initialDayofWeek = -1;\n        }\n        this.currentDayofWeek = this.currentDayofWeek - 1;\n      }\n      if (this.currentDayofWeek == 7) {\n        this.currentDayofWeek = 0;\n      }\n    }\n\n    while (this.currentDayofWeek != 0) {\n      days = days - 1;\n\n      if (this.currentMonth == 1 && this.currentDate == 1) {\n        this.currentYear = this.currentYear - 1;\n        this.currentMonth = 12;\n        this.currentDate = 31;\n        this.newDate = new Date(\n          this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n        );\n      } else {\n        this.currentDate = this.currentDate - 1;\n        this.newDate = new Date(\n          this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n        );\n\n        if (this.newDate.getDate() != this.currentDate) {\n          //31 day months\n          if (\n            this.currentDate == 0 &&\n            (this.currentMonth == 2 ||\n              this.currentMonth == 4 ||\n              this.currentMonth == 6 ||\n              this.currentMonth == 8 ||\n              this.currentMonth == 9 ||\n              this.currentMonth == 11 ||\n              this.currentMonth == 1)\n          ) {\n            this.newDate = new Date(\n              this.currentYear + \"/\" + (this.currentMonth - 1) + \"/\" + 31\n            );\n            this.currentDate = 31;\n          }\n          //30 day months\n          if (\n            this.currentDate == 0 &&\n            (this.currentMonth == 5 ||\n              this.currentMonth == 7 ||\n              this.currentMonth == 10 ||\n              this.currentMonth == 12)\n          ) {\n            this.newDate = new Date(\n              this.currentYear + \"/\" + (this.currentMonth - 1) + \"/\" + 30\n            );\n            this.currentDate = 30;\n          }\n          //February\n          if (this.currentDate == 0 && this.currentMonth == 3) {\n            this.newDate = new Date(this.currentYear + \"/\" + 2 + \"/\" + 29);\n            this.currentDate = 29;\n            if (this.newDate.getMonth() == 2) {\n              this.newDate = new Date(this.currentYear + \"/\" + 2 + \"/\" + 28);\n              this.currentDate = 28;\n            }\n          }\n          this.currentMonth = this.currentMonth - 1;\n        }\n      }\n\n      this.currentDayofWeek = this.currentDayofWeek - 1;\n    }\n\n    // Creates first date element\n    var dynamicEl = document.createElement(\"lrn-calendar-date\");\n    dynamicEl.date = this.newDate;\n    dynamicEl.firstWeek = true;\n    dynamicEl.style.width = \"14.25%\";\n    dynamicEl.style.display = \"inline-block\";\n    dynamicEl.setAttribute(\"id\", \"date\");\n    dynamicEl.view = this.view;\n    if (\n      this.date.getFullYear() === this.newDate.getFullYear() &&\n      this.date.getMonth() === this.newDate.getMonth() &&\n      this.date.getDate() === this.newDate.getDate()\n    ) {\n      dynamicEl.loadeddate = true;\n    }\n\n    //var eventList = this.getEvents(this.newDate, this.calendarText);\n\n    var eventsOnDay = this.eventCheck(this.listOfEvents, this.newDate);\n    var sendEvent = this.createReturn(eventsOnDay);\n    dynamicEl.events = sendEvent;\n\n    dynamicEl.valid = true;\n    dom(this.calendarView).appendChild(dynamicEl);\n\n    var firstWeekCount = 1;\n    while (days < this.totalDays) {\n      //If 12/31\n      if (this.currentMonth == 12 && this.currentDate == 31) {\n        this.currentYear = this.currentYear + 1;\n        this.currentMonth = 1;\n        this.currentDate = 1;\n        this.newDay = new Date(\n          this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n        );\n      } else {\n        this.currentDate = this.currentDate + 1;\n        this.newDay = new Date(\n          this.currentYear + \"/\" + this.currentMonth + \"/\" + this.currentDate\n        );\n\n        if (this.newDay.getDate() != this.currentDate) {\n          if (\n            this.currentMonth == 1 ||\n            this.currentMonth == 3 ||\n            this.currentMonth == 5 ||\n            this.currentMonth == 7 ||\n            this.currentMonth == 8 ||\n            this.currentMonth == 10 ||\n            this.currentMonth == 12\n          ) {\n            this.newDay = new Date(\n              this.currentYear + \"/\" + (this.currentMonth + 1) + \"/\" + 1\n            );\n          }\n          this.currentDate = 1;\n          this.currentMonth = this.currentMonth + 1;\n        }\n      }\n      var dynamicEl = document.createElement(\"lrn-calendar-date\");\n      dynamicEl.valid = true;\n      dynamicEl.setAttribute(\"id\", \"date\");\n      dynamicEl.date = this.newDay;\n      dynamicEl.style.width = \"14.25%\";\n      dynamicEl.style.display = \"inline-block\";\n      dynamicEl.view = this.view;\n\n      if (\n        this.date.getFullYear() === this.newDay.getFullYear() &&\n        this.date.getMonth() === this.newDay.getMonth() &&\n        this.date.getDate() === this.newDay.getDate()\n      ) {\n        dynamicEl.loadeddate = true;\n      }\n      var eventsOnDayMain = this.eventCheck(this.listOfEvents, this.newDay);\n      var sendEventMain = this.createReturn(eventsOnDayMain);\n      dynamicEl.events = sendEventMain;\n\n      if (firstWeekCount < 7) {\n        dynamicEl.firstWeek = true;\n      }\n      firstWeekCount = firstWeekCount + 1;\n      dynamicEl.valid = true;\n\n      dom(this.calendarView).appendChild(dynamicEl);\n\n      days = days + 1;\n      if (days == this.totalDays && this.newDay.getDay() != 6) {\n        days = days - 1;\n        pastDate = 1;\n      }\n    }\n  },\n\n  /*\n  * Get events gets the events that are within the calendar corresponding to the specific event\n  * \n  */\n  getEvents: function(date, text) {\n    if (text == \"Not Found\") {\n      return \"\";\n    }\n    var iCalendarData = text;\n    var jcalData = ICAL.parse(iCalendarData);\n    var vcalendar = new ICAL.Component(jcalData);\n    var vevent = vcalendar.getFirstSubcomponent(\"vevent\");\n    var vevents = vcalendar.getAllSubcomponents(\"vevent\");\n\n    var displayEvents = vevents.map(vevent => {\n      event = new ICAL.Event(vevent);\n      return event;\n    });\n    this.eventArray = [];\n    for (var i = 0; i < displayEvents.length; i++) {\n      var startDay = this.createDate(displayEvents[i]);\n      if (displayEvents[i].isRecurring()) {\n        this.createRecurrence(displayEvents[i]);\n      }\n      this.eventArray.push(displayEvents[i]);\n    }\n\n    return this.eventArray;\n  },\n\n  /*\n  * Determines what type of recurrence is occuring and calls createRepeatedEvent\n  * The int in the function call is the max number of recurrences\n  */\n  createRecurrence: function(events) {\n    if (events.getRecurrenceTypes().WEEKLY) {\n      this.createRepeatedEvent(events, 156);\n    } else if (events.getRecurrenceTypes().DAILY) {\n      this.createRepeatedEvent(events, 720);\n    } else if (events.getRecurrenceTypes().MONTHLY) {\n      this.createRepeatedEvent(events, 36);\n    } else if (events.getRecurrenceTypes().YEARLY) {\n      this.createRepeatedEvent(events, 10);\n    }\n  },\n\n  /*\n  * Iterates through the recurring event.  Each time it creates a new event.  \n  * Currently it sets the summary and description the same since that will not change\n  * That will need to be adjusted, only info in new Event is start time, end time, summary, and description\n  * The new event is loaded into the array of all the events\n  */\n  createRepeatedEvent: function(events, maxRepeat) {\n    var iter = events.iterator(events.startDate);\n\n    let next;\n    let num = 0;\n    while ((next = iter.next()) && num++ < maxRepeat) {\n      var newTest = new ICAL.Event();\n\n      newTest.summary = events.summary;\n      newTest.description = events.description;\n      newTest.startDate = events.getOccurrenceDetails(next).startDate;\n      newTest.endDate = events.getOccurrenceDetails(next).endDate;\n      var locationString = String(events.location);\n      newTest.location = locationString;\n      if (\n        newTest.startDate._time.day != events.startDate._time.day ||\n        newTest.startDate._time.month != events.startDate._time.month ||\n        newTest.startDate._time.year != events.startDate._time.year\n      ) {\n        this.eventArray.push(newTest);\n      }\n    }\n    return;\n  },\n\n  /*\n  * Called from eventCheck, gets the start time of an event and returns it\n  */\n  createDate: function(event) {\n    var year = event.startDate._time.year;\n    var month = event.startDate._time.month;\n    var day = event.startDate._time.day;\n    var eventDate = new Date(year + \"/\" + month + \"/\" + day);\n    return eventDate;\n  },\n\n  /*\n  * Check if the event occurs on this date and then includes it in the event array that is returned\n  * this.startIndex determines the index of the event array that it should start looking for the events that occur\n  * on that day.  This is to increase efficiency to not keep scrolling through the list\n  * Once an event is found after the date, it exits the for loop\n  * This is all because the event array is sorted by date\n  */\n  eventCheck: function(events, date) {\n    var eventsOnDay = [];\n    var end = events.length;\n    for (var i = this.startIndex; i < end; i++) {\n      var startDay = this.createDate(events[i]);\n      if (startDay.getTime() > date.getTime()) {\n        end = i;\n        if (i != 0) {\n          this.startIndex = i - 1;\n        }\n      }\n      if (startDay.getTime() == date.getTime()) {\n        eventsOnDay.push(events[i]);\n      }\n    }\n    return eventsOnDay;\n  },\n\n  /*\n  * Organizes the events on a certain day in order based on start time\n  */\n  sortByTime: function(eventList) {\n    var swapped;\n    do {\n      swapped = false;\n      for (var i = 0; i < eventList.length - 1; i++) {\n        if (eventList[i].startDate > eventList[i + 1].startDate) {\n          var temp = eventList[i];\n          eventList[i] = eventList[i + 1];\n          eventList[i + 1] = temp;\n          swapped = true;\n        }\n      }\n    } while (swapped);\n    return eventList;\n  },\n\n  getDateInfo: function() {\n    this.startMonth = this.date.getMonth() + 1;\n    this.startYear = this.date.getFullYear();\n    this.startDay = this.date.getDate();\n    this.startDayOfWeek = this.date.getDay();\n    this.currentDate = this.startDay;\n    this.currentMonth = this.startMonth;\n    this.currentYear = this.startYear;\n    this.currentDayofWeek = this.startDayOfWeek;\n    return;\n  },\n\n  /*\n  * Creates an event array that gets all of the events for that certain day\n  */\n  createReturn: function(event) {\n    var EventArray = [];\n\n    for (var i = 0; i < event.length; i++) {\n      EventArray.push({ event: event[i] });\n    }\n    return EventArray;\n  },\n\n  /*\n  * Gets the date to display on the header, currently the month and year. Returns it as a String\n  */\n  getDisplayDate: function(date) {\n    if (typeof date.getMonth === \"function\") {\n      var monthInt = date.getMonth();\n      var day = date.getDate();\n      var monthsArray = [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\"\n      ];\n      return monthsArray[monthInt] + \" \" + date.getFullYear();\n    }\n    return \"\";\n  }\n});\n"],"names":["_template","html","is","properties","title","type","String","value","name","date","Date","loadeddate","Boolean","firstWeek","view","valid","getMonth","monthInt","day","getDate","monthstring","getWeek","getDay","timeString","startHour","startMinute","endHour","endMinute","amPM","computeStyle","item","event","startDate","_time","hour","s","getDateString","getFullYear","displayActivity","e","summary","displayStart","startTime","this","minute","endDate","displayEnd","displayDuration","duration","days","hours","minutes","weeks","displayDescription","description","displayLocation","location","behaviors","HAXBehaviors","PropertiesBehaviors","listOfEvents","Array","dateString","observer","file","reflectToAttribute","_fileChanged","newValue","oldValue","_typeof","__icalLoaded","loadFile","getDateInfo","createCalendar","_viewTypeChanged","_dateChanged","_dateStringChanged","created","basePath","pathFromUrl","window","addEventListener","_icalLoaded","bind","ESGlobalBridge","requestAvailability","instance","load","attached","setHaxProperties","canScale","canPosition","canEditSource","gizmo","icon","color","groups","handles","source","meta","author","settings","quick","property","inputMethod","required","configure","validationType","options","week","month","advanced","startIndex","calendarText","readTextFile","getEvents","sortByTime","showPrev","current","startMonth","showNext","showDate","monthView","weekView","fileNotFound","rawFile","XMLHttpRequest","allText","open","onreadystatechange","readyState","status","responseText","send","totalDays","numweeks","calendarView","$","calView","elem","dom","node","elemChildren","childNodes","removeChild","initialDayofWeek","currentDayofWeek","dayCount","currentMonth","startDay","newDate","currentYear","currentDate","dynamicEl","document","createElement","style","width","display","setAttribute","eventsOnDay","eventCheck","sendEvent","createReturn","events","appendChild","firstWeekCount","newDay","eventsOnDayMain","sendEventMain","text","iCalendarData","jcalData","ICAL","parse","vcalendar","Component","displayEvents","getFirstSubcomponent","getAllSubcomponents","map","vevent","Event","eventArray","i","length","createDate","isRecurring","createRecurrence","push","getRecurrenceTypes","WEEKLY","createRepeatedEvent","DAILY","MONTHLY","YEARLY","maxRepeat","next","iter","iterator","num","newTest","getOccurrenceDetails","locationString","year","end","getTime","eventList","swapped","temp","startYear","startDayOfWeek","EventArray","getDisplayDate"],"mappings":"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"}